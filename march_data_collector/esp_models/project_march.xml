<project name="project_march" threads="1" pubsub="auto" heartbeat-interval="1" port="9901">
  <description><![CDATA[Main ESP model used by march. Consists of three continuous queries: one for joining temperature data, one for gait analysis and one for controller analysis]]></description>
  <metadata>
    <meta id="studioUploadedBy">r.vanbeek</meta>
    <meta id="studioUploaded">1591254982051</meta>
    <meta id="studioModifiedBy">r.vanbeek</meta>
    <meta id="studioModified">1591611495793</meta>
    <meta id="layout">{"control_analysis":{"Aggregate3":{"x":null,"y":null},"Com":{"x":-45,"y":-165},"Computes the square effort ":{"x":null,"y":null},"Copy1":{"x":null,"y":null},"Copy3":{"x":-1055,"y":140},"Copy4":{"x":-1715,"y":-1040},"RemoveState10":{"x":null,"y":null},"RemoveState3":{"x":-1050,"y":50},"add_lag_one":{"x":-955,"y":-80},"aggregate_gait_control":{"x":-975,"y":480},"aggregate_per_gait":{"x":-645,"y":940},"compute_actual_effort":{"x":275,"y":-90},"compute_safety_limits_worked":{"x":-95,"y":115},"compute_sign_change":{"x":-820,"y":180},"compute_square_effort_change":{"x":-240,"y":-315},"compute_squared_effort_difference":{"x":-1720,"y":-1045},"compute_squared_error":{"x":-550,"y":-30},"join_controller_statistics":{"x":-365,"y":525},"join_effort_command_statistics":{"x":null,"y":null},"join_effort_commands":{"x":-35,"y":-90},"join_effort_statistics":{"x":-120,"y":410},"join_error_statisctics":{"x":-515,"y":300},"join_gait_controller":{"x":-655,"y":735},"join_pid_state_left_hip_aa":{"x":-675,"y":-905},"join_pid_state_left_hip_fe":{"x":-675,"y":-760},"join_pid_state_left_knee":{"x":-675,"y":-640},"join_pid_state_right_ankle":{"x":-675,"y":-525},"join_pid_state_right_hip_aa":{"x":-675,"y":-410},"join_pid_state_right_hip_fe":{"x":-675,"y":-310},"join_pid_state_right_knee":{"x":-675,"y":-205},"normalize_effort":{"x":-110,"y":-765},"remove_state_4":{"x":-745,"y":-50},"remove_state_aggregate_per_gait":{"x":-685,"y":1105},"remove_state_pid":{"x":null,"y":null},"source_effort_command":{"x":-70,"y":-1005},"source_gait_control":{"x":-970,"y":360},"source_imc":{"x":295,"y":-410},"source_joint":{"x":310,"y":-980},"source_pid_state_left_ankle":{"x":-675,"y":-1045},"source_pid_state_left_hip_aa":{"x":-445,"y":-1045},"source_pid_state_left_hip_fe":{"x":-445,"y":-900},"source_pid_state_left_knee":{"x":-450,"y":-755},"source_pid_state_right_ankle":{"x":-455,"y":-630},"source_pid_state_right_hip_aa":{"x":-435,"y":-535},"source_pid_state_right_hip_fe":{"x":-420,"y":-415},"source_pid_state_right_knee":{"x":-430,"y":-320}},"gait_analysis":{"RemoveState1":{"x":-2255,"y":-595},"absolute_jerk":{"x":-1200,"y":-1525},"aggregate_com":{"x":-1570,"y":-1360},"aggregate_gait":{"x":-2320,"y":-1370},"aggregate_imu":{"x":-2070,"y":-1365},"aggregate_joint":{"x":-1225,"y":-1355},"aggregate_over_gait":{"x":-2245,"y":-730},"aggregate_ps":{"x":-1825,"y":-1360},"join_gait":{"x":-2255,"y":-875},"join_imu":{"x":-1990,"y":-950},"join_joint_com":{"x":-1420,"y":-1175},"join_ps":{"x":-1690,"y":-1065},"source_com":{"x":-1545,"y":-1530},"source_gait":{"x":-2305,"y":-1510},"source_imu":{"x":-2080,"y":-1515},"source_joint":{"x":-1195,"y":-1660},"source_ps":{"x":-1815,"y":-1510}},"temperature_join":{"join_temperature_left_hip_aa":{"x":-505,"y":-245},"joint_temperature_left_hip_fe":{"x":-505,"y":-120},"joint_temperature_left_knee":{"x":-505,"y":0},"joint_temperature_right_ankle":{"x":-505,"y":115},"joint_temperature_right_hip_aa":{"x":-505,"y":240},"joint_temperature_right_hip_fe":{"x":-505,"y":365},"joint_temperature_right_knee":{"x":-505,"y":485},"source_temperature_left_ankle":{"x":-505,"y":-375},"source_temperature_left_hip_aa":{"x":-285,"y":-380},"source_temperature_left_hip_fe":{"x":-275,"y":-240},"source_temperature_left_knee":{"x":-280,"y":-135},"source_temperature_right_ankle":{"x":-275,"y":-10},"source_temperature_right_hip_aa":{"x":-275,"y":115},"source_temperature_right_hip_fe":{"x":-265,"y":230},"source_temperature_right_knee":{"x":-260,"y":365}}}</meta>
  </metadata>
  <properties>
    <property name="Retention"><![CDATA[10]]></property>
  </properties>
  <contqueries>
    <contquery name="temperature_join">
      <description><![CDATA[This continuous query joins all the different temperature event streams and outputs them as one csv.]]></description>
      <windows>
        <window-source pubsub="true" name="source_temperature_left_ankle">
          <description><![CDATA[Source window for the temperature of the left_ankle joint.]]></description>
          <schema>
            <fields>
              <field name="time" type="stamp" key="true"/>
              <field name="temperature" type="double"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="time"><![CDATA[@Retention@ seconds]]></retention>
          <connectors>
            <connector class="fs" name="imu_csv">
              <description><![CDATA[Puts the temperature of the left ankle in a csv]]></description>
              <properties>
                <property name="type"><![CDATA[sub]]></property>
                <property name="dateformat"><![CDATA[%Y-%m-%d %H:%M:%S]]></property>
                <property name="fsname"><![CDATA[data/temperature_left_ankle_@NOW@.csv]]></property>
                <property name="fstype"><![CDATA[csv]]></property>
                <property name="snapshot"><![CDATA[true]]></property>
                <property name="header"><![CDATA[full]]></property>
              </properties>
            </connector>
          </connectors>
        </window-source>
        <window-join pubsub="true" name="join_temperature_left_hip_aa">
          <description><![CDATA[Joins the temperature of the left_hip_aa to the event stream]]></description>
          <join type="inner">
            <conditions>
              <fields left="time" right="time"/>
            </conditions>
          </join>
          <output>
            <field-selection name="temperature_left_ankle" source="l_temperature"/>
            <field-selection name="temperature_left_hip_aa" source="r_temperature"/>
          </output>
        </window-join>
        <window-source pubsub="true" name="source_temperature_right_ankle">
          <description><![CDATA[Source window for the temperature of the right_ankle joint.]]></description>
          <schema>
            <fields>
              <field name="time" type="stamp" key="true"/>
              <field name="temperature" type="double"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="time"><![CDATA[@Retention@ seconds]]></retention>
          <connectors>
            <connector class="fs" name="imu_csv">
              <description><![CDATA[Puts the temperature of the right ankle in a csv]]></description>
              <properties>
                <property name="type"><![CDATA[sub]]></property>
                <property name="dateformat"><![CDATA[%Y-%m-%d %H:%M:%S]]></property>
                <property name="fsname"><![CDATA[data/temperature_right_ankle_@NOW@.csv]]></property>
                <property name="fstype"><![CDATA[csv]]></property>
                <property name="snapshot"><![CDATA[true]]></property>
                <property name="header"><![CDATA[full]]></property>
              </properties>
            </connector>
          </connectors>
        </window-source>
        <window-source pubsub="true" name="source_temperature_left_hip_aa">
          <description><![CDATA[Source window for the temperature of the left_hip_aa joint.]]></description>
          <schema>
            <fields>
              <field name="time" type="stamp" key="true"/>
              <field name="temperature" type="double"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="time"><![CDATA[@Retention@ seconds]]></retention>
          <connectors>
            <connector class="fs" name="imu_csv">
              <description><![CDATA[Puts the temperature of the left hip aa in a csv]]></description>
              <properties>
                <property name="type"><![CDATA[sub]]></property>
                <property name="dateformat"><![CDATA[%Y-%m-%d %H:%M:%S]]></property>
                <property name="fsname"><![CDATA[data/temperature_left_hip_aa_@NOW@.csv]]></property>
                <property name="fstype"><![CDATA[csv]]></property>
                <property name="snapshot"><![CDATA[true]]></property>
                <property name="header"><![CDATA[full]]></property>
              </properties>
            </connector>
          </connectors>
        </window-source>
        <window-source pubsub="true" name="source_temperature_left_hip_fe">
          <description><![CDATA[Source window for the temperature of the left_hip_fe joint.]]></description>
          <schema>
            <fields>
              <field name="time" type="stamp" key="true"/>
              <field name="temperature" type="double"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="time"><![CDATA[@Retention@ seconds]]></retention>
          <connectors>
            <connector class="fs" name="imu_csv">
              <description><![CDATA[Puts the temperature of the left hip fe in a csv]]></description>
              <properties>
                <property name="type"><![CDATA[sub]]></property>
                <property name="dateformat"><![CDATA[%Y-%m-%d %H:%M:%S]]></property>
                <property name="fsname"><![CDATA[data/temperature_left_hip_fe_@NOW@.csv]]></property>
                <property name="fstype"><![CDATA[csv]]></property>
                <property name="snapshot"><![CDATA[true]]></property>
                <property name="header"><![CDATA[full]]></property>
              </properties>
            </connector>
          </connectors>
        </window-source>
        <window-source pubsub="true" name="source_temperature_left_knee">
          <description><![CDATA[Source window for the temperature of the left_knee joint.]]></description>
          <schema>
            <fields>
              <field name="time" type="stamp" key="true"/>
              <field name="temperature" type="double"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="time"><![CDATA[@Retention@ seconds]]></retention>
          <connectors>
            <connector class="fs" name="imu_csv">
              <description><![CDATA[Puts the temperature of the left knee in a csv]]></description>
              <properties>
                <property name="type"><![CDATA[sub]]></property>
                <property name="dateformat"><![CDATA[%Y-%m-%d %H:%M:%S]]></property>
                <property name="fsname"><![CDATA[data/temperature_left_knee_@NOW@.csv]]></property>
                <property name="fstype"><![CDATA[csv]]></property>
                <property name="snapshot"><![CDATA[true]]></property>
                <property name="header"><![CDATA[full]]></property>
              </properties>
            </connector>
          </connectors>
        </window-source>
        <window-source pubsub="true" name="source_temperature_right_hip_aa">
          <description><![CDATA[Source window for the temperature of the right_ankle joint.]]></description>
          <schema>
            <fields>
              <field name="time" type="stamp" key="true"/>
              <field name="temperature" type="double"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="time"><![CDATA[@Retention@ seconds]]></retention>
          <connectors>
            <connector class="fs" name="imu_csv">
              <description><![CDATA[Puts the temperature of the right hip aa in a csv]]></description>
              <properties>
                <property name="type"><![CDATA[sub]]></property>
                <property name="dateformat"><![CDATA[%Y-%m-%d %H:%M:%S]]></property>
                <property name="fsname"><![CDATA[data/temperature_right_hip_aa_@NOW@.csv]]></property>
                <property name="fstype"><![CDATA[csv]]></property>
                <property name="snapshot"><![CDATA[true]]></property>
                <property name="header"><![CDATA[full]]></property>
              </properties>
            </connector>
          </connectors>
        </window-source>
        <window-source pubsub="true" name="source_temperature_right_hip_fe">
          <description><![CDATA[Source window for the temperature of the right_hip_fe joint.]]></description>
          <schema>
            <fields>
              <field name="time" type="stamp" key="true"/>
              <field name="temperature" type="double"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="time"><![CDATA[@Retention@ seconds]]></retention>
          <connectors>
            <connector class="fs" name="imu_csv">
              <description><![CDATA[Puts the temperature of the right hip fe in a csv]]></description>
              <properties>
                <property name="type"><![CDATA[sub]]></property>
                <property name="dateformat"><![CDATA[%Y-%m-%d %H:%M:%S]]></property>
                <property name="fsname"><![CDATA[data/temperature_right_hip_fe_@NOW@.csv]]></property>
                <property name="fstype"><![CDATA[csv]]></property>
                <property name="snapshot"><![CDATA[true]]></property>
                <property name="header"><![CDATA[full]]></property>
              </properties>
            </connector>
          </connectors>
        </window-source>
        <window-source pubsub="true" name="source_temperature_right_knee">
          <description><![CDATA[Source window for the temperature of the right_knee joint.]]></description>
          <schema>
            <fields>
              <field name="time" type="stamp" key="true"/>
              <field name="temperature" type="double"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="time"><![CDATA[@Retention@ seconds]]></retention>
          <connectors>
            <connector class="fs" name="imu_csv">
              <description><![CDATA[Puts the temperature of the right knee in a csv]]></description>
              <properties>
                <property name="type"><![CDATA[sub]]></property>
                <property name="dateformat"><![CDATA[%Y-%m-%d %H:%M:%S]]></property>
                <property name="fsname"><![CDATA[data/temperature_right_knee_@NOW@.csv]]></property>
                <property name="fstype"><![CDATA[csv]]></property>
                <property name="snapshot"><![CDATA[true]]></property>
                <property name="header"><![CDATA[full]]></property>
              </properties>
            </connector>
          </connectors>
        </window-source>
        <window-join pubsub="true" name="joint_temperature_left_hip_fe">
          <description><![CDATA[Joins the temperature of the left_hip_fe to the event stream]]></description>
          <join type="inner">
            <conditions>
              <fields left="time" right="time"/>
            </conditions>
          </join>
          <output>
            <field-selection name="temperature_left_ankle" source="l_temperature_left_ankle"/>
            <field-selection name="temperature_left_hip_aa" source="l_temperature_left_hip_aa"/>
            <field-selection name="tempeature_left_hip_fe" source="r_temperature"/>
          </output>
        </window-join>
        <window-join pubsub="true" name="joint_temperature_left_knee">
          <description><![CDATA[Joins the temperature of the left_knee to the event stream]]></description>
          <join type="inner">
            <conditions>
              <fields left="time" right="time"/>
            </conditions>
          </join>
          <output>
            <field-selection name="temperature_left_ankle" source="l_temperature_left_ankle"/>
            <field-selection name="temperature_left_hip_aa" source="l_temperature_left_hip_aa"/>
            <field-selection name="temperature_left_hip_fe" source="l_tempeature_left_hip_fe"/>
            <field-selection name="temperature_left_knee" source="r_temperature"/>
          </output>
        </window-join>
        <window-join pubsub="true" name="joint_temperature_right_ankle">
          <description><![CDATA[Joins the temperature of the right_ankle to the event stream]]></description>
          <join type="inner">
            <conditions>
              <fields left="time" right="time"/>
            </conditions>
          </join>
          <output>
            <field-selection name="temperature_left_ankle" source="l_temperature_left_ankle"/>
            <field-selection name="temperature_left_hip_aa" source="l_temperature_left_hip_aa"/>
            <field-selection name="temperature_left_hip_fe" source="l_temperature_left_hip_fe"/>
            <field-selection name="temperature_left_knee" source="l_temperature_left_hip_fe"/>
            <field-selection name="temperature_right_ankle" source="r_temperature"/>
          </output>
        </window-join>
        <window-join pubsub="true" name="joint_temperature_right_hip_aa">
          <description><![CDATA[Joins the temperature of the right_hip_aa to the event stream]]></description>
          <join type="inner">
            <conditions>
              <fields left="time" right="time"/>
            </conditions>
          </join>
          <output>
            <field-selection name="temperature_left_ankle" source="l_temperature_left_ankle"/>
            <field-selection name="temperature_left_hip_aa" source="l_temperature_left_hip_aa"/>
            <field-selection name="temperature_left_hip_fe" source="l_temperature_left_hip_fe"/>
            <field-selection name="temperature_left_knee" source="l_temperature_left_knee"/>
            <field-selection name="temperature_right_ankle" source="l_temperature_right_ankle"/>
            <field-selection name="temperature_right_hip_aa" source="r_temperature"/>
          </output>
        </window-join>
        <window-join pubsub="true" name="joint_temperature_right_hip_fe">
          <description><![CDATA[Joins the temperature of the right_hip_fe to the event stream]]></description>
          <join type="inner">
            <conditions>
              <fields left="time" right="time"/>
            </conditions>
          </join>
          <output>
            <field-selection name="temperature_left_ankle" source="l_temperature_left_ankle"/>
            <field-selection name="temperature_left_hip_aa" source="l_temperature_left_hip_aa"/>
            <field-selection name="temperature_left_hip_fe" source="l_temperature_left_hip_fe"/>
            <field-selection name="temperature_left_knee" source="l_temperature_left_knee"/>
            <field-selection name="temperature_right_ankle" source="l_temperature_right_ankle"/>
            <field-selection name="temperature_right_hip_aa" source="l_temperature_right_hip_aa"/>
            <field-selection name="temperature_right_hip_fe" source="r_temperature"/>
          </output>
        </window-join>
        <window-join pubsub="true" name="joint_temperature_right_knee">
          <description><![CDATA[Joins the temperature of the right_knee to the event stream]]></description>
          <join type="inner">
            <conditions>
              <fields left="time" right="time"/>
            </conditions>
          </join>
          <output>
            <field-selection name="temperature_left_ankle" source="l_temperature_left_ankle"/>
            <field-selection name="temperature_left_hip_aa" source="l_temperature_left_hip_aa"/>
            <field-selection name="temperature_left_hip_fe" source="l_temperature_left_hip_fe"/>
            <field-selection name="temperature_left_knee" source="l_temperature_left_knee"/>
            <field-selection name="temperature_right_ankle" source="l_temperature_right_ankle"/>
            <field-selection name="temperature_right_hip_aa" source="l_temperature_right_hip_aa"/>
            <field-selection name="temperature_right_hip_fe" source="l_temperature_right_hip_fe"/>
            <field-selection name="temperature_right_knee" source="r_temperature"/>
          </output>
          <connectors>
            <connector class="fs" name="temperature_csv">
              <description><![CDATA[Puts the temperature data in a csv file.]]></description>
              <properties>
                <property name="type"><![CDATA[sub]]></property>
                <property name="dateformat"><![CDATA[%Y-%m-%d %H:%M:%S]]></property>
                <property name="fsname"><![CDATA[data/temperature_@NOW@.csv]]></property>
                <property name="fstype"><![CDATA[csv]]></property>
                <property name="snapshot"><![CDATA[true]]></property>
                <property name="header"><![CDATA[full]]></property>
              </properties>
            </connector>
          </connectors>
        </window-join>
      </windows>
      <edges>
        <edge source="source_temperature_left_ankle" target="join_temperature_left_hip_aa" role="left"/>
        <edge source="source_temperature_left_hip_aa" target="join_temperature_left_hip_aa" role="right"/>
        <edge source="join_temperature_left_hip_aa" target="joint_temperature_left_hip_fe" role="left"/>
        <edge source="source_temperature_left_hip_fe" target="joint_temperature_left_hip_fe" role="right"/>
        <edge source="joint_temperature_left_hip_fe" target="joint_temperature_left_knee" role="left"/>
        <edge source="source_temperature_left_knee" target="joint_temperature_left_knee" role="right"/>
        <edge source="joint_temperature_left_knee" target="joint_temperature_right_ankle" role="left"/>
        <edge source="joint_temperature_right_ankle" target="joint_temperature_right_hip_aa" role="left"/>
        <edge source="joint_temperature_right_hip_aa" target="joint_temperature_right_hip_fe" role="left"/>
        <edge source="joint_temperature_right_hip_fe" target="joint_temperature_right_knee" role="left"/>
        <edge source="source_temperature_right_ankle" target="joint_temperature_right_ankle" role="right"/>
        <edge source="source_temperature_right_hip_aa" target="joint_temperature_right_hip_aa" role="right"/>
        <edge source="source_temperature_right_hip_fe" target="joint_temperature_right_hip_fe" role="right"/>
        <edge source="source_temperature_right_knee" target="joint_temperature_right_knee" role="right"/>
      </edges>
    </contquery>
    <contquery name="gait_analysis" include-singletons="true">
      <description><![CDATA[This continuous query is aimed at analyzing the executing of gaits.]]></description>
      <windows>
        <window-source pubsub="true" insert-only="true" autogen-key="true" name="source_gait">
          <description><![CDATA[Source window for gait events]]></description>
          <schema>
            <fields>
              <field name="SEQUENCE" type="int64" key="true"/>
              <field name="dummy_key" type="int64"/>
              <field name="time" type="stamp"/>
              <field name="gait_name" type="string"/>
              <field name="subgait_name" type="string"/>
              <field name="version" type="string"/>
              <field name="gait_type" type="string"/>
            </fields>
          </schema>
        </window-source>
        <window-aggregate pubsub="true" name="aggregate_gait">
          <description><![CDATA[Selects the last gait event for joining to the stream.]]></description>
          <schema>
            <fields>
              <field name="dummy_key" type="int64" key="true"/>
              <field name="SEQUENCE" type="int64"/>
              <field name="time" type="stamp"/>
              <field name="gait_name" type="string"/>
              <field name="subgait_name" type="string"/>
              <field name="version" type="string"/>
              <field name="gait_type" type="string"/>
            </fields>
          </schema>
          <output>
            <field-expr><![CDATA[ESP_aLast(SEQUENCE)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(time)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(gait_name)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(subgait_name)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(version)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(gait_type)]]></field-expr>
          </output>
        </window-aggregate>
        <window-source pubsub="true" name="source_imu">
          <description><![CDATA[Source window for IMU events]]></description>
          <schema>
            <fields>
              <field name="SEQUENCE" type="int64" key="true"/>
              <field name="dummy_key" type="int64"/>
              <field name="time" type="stamp"/>
              <field name="roll" type="double"/>
              <field name="pitch" type="double"/>
              <field name="yaw" type="double"/>
              <field name="rotational_velocity_x" type="double"/>
              <field name="rotational_velocity_y" type="double"/>
              <field name="rotational_velocity_z" type="double"/>
              <field name="linear_acceleration_x" type="double"/>
              <field name="linear_acceleration_y" type="double"/>
              <field name="linear_acceleration_z" type="double"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="time"><![CDATA[@Retention@ seconds]]></retention>
          <connectors>
            <connector class="fs" name="imu_csv">
              <description><![CDATA[Puts the raw imu data in a csv]]></description>
              <properties>
                <property name="type"><![CDATA[sub]]></property>
                <property name="dateformat"><![CDATA[%Y-%m-%d %H:%M:%S]]></property>
                <property name="fsname"><![CDATA[data/imu_@NOW@.csv]]></property>
                <property name="fstype"><![CDATA[csv]]></property>
                <property name="snapshot"><![CDATA[true]]></property>
                <property name="header"><![CDATA[full]]></property>
              </properties>
            </connector>
          </connectors>
        </window-source>
        <window-source pubsub="true" name="source_ps">
          <description><![CDATA[Source window for pressure sole events.]]></description>
          <schema>
            <fields>
              <field name="SEQUENCE" type="int64" key="true"/>
              <field name="dummy_key" type="int64"/>
              <field name="time" type="stamp"/>
              <field name="total_force_left" type="double"/>
              <field name="total_force_right" type="double"/>
              <field name="pressure_left" type="array(dbl)"/>
              <field name="pressure_right" type="array(dbl)"/>
              <field name="cop_left_x" type="double"/>
              <field name="cop_left_y" type="double"/>
              <field name="cop_right_x" type="double"/>
              <field name="cop_right_y" type="double"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="time"><![CDATA[@Retention@ seconds]]></retention>
          <connectors>
            <connector class="fs" name="pressure_sole_csv">
              <description><![CDATA[Puts the raw pressure sole data in a csv]]></description>
              <properties>
                <property name="type"><![CDATA[sub]]></property>
                <property name="dateformat"><![CDATA[%Y-%m-%d %H:%M:%S]]></property>
                <property name="header"><![CDATA[full]]></property>
                <property name="snapshot"><![CDATA[true]]></property>
                <property name="fsname"><![CDATA[data/pressure_sole_@NOW@.csv]]></property>
                <property name="fstype"><![CDATA[csv]]></property>
              </properties>
            </connector>
          </connectors>
        </window-source>
        <window-source pubsub="true" name="source_com">
          <description><![CDATA[Source window for exoskeleton center of mass data.]]></description>
          <schema>
            <fields>
              <field key="true" name="SEQUENCE" type="int64"/>
              <field key="false" name="dummy_key" type="int64"/>
              <field key="false" name="time" type="stamp"/>
              <field key="false" name="com_x" type="double"/>
              <field key="false" name="com_y" type="double"/>
              <field key="false" name="com_z" type="double"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="time"><![CDATA[@Retention@ seconds]]></retention>
          <connectors>
            <connector class="fs" name="com_csv">
              <description><![CDATA[Puts the center of mass data in a csv file.]]></description>
              <properties>
                <property name="type"><![CDATA[sub]]></property>
                <property name="dateformat"><![CDATA[%Y-%m-%d %H:%M:%S]]></property>
                <property name="fsname"><![CDATA[data/com_@NOW@.csv]]></property>
                <property name="fstype"><![CDATA[csv]]></property>
                <property name="snapshot"><![CDATA[true]]></property>
                <property name="header"><![CDATA[full]]></property>
              </properties>
            </connector>
          </connectors>
        </window-source>
        <window-source pubsub="true" name="source_joint">
          <schema>
            <fields>
              <field name="SEQUENCE" type="int64" key="true"/>
              <field name="dummy_key" type="int64"/>
              <field name="time" type="stamp"/>
              <field name="actual_position_left_ankle" type="double"/>
              <field name="actual_position_left_hip_aa" type="double"/>
              <field name="actual_position_left_hip_fe" type="double"/>
              <field name="actual_position_left_knee" type="double"/>
              <field name="actual_position_right_ankle" type="double"/>
              <field name="actual_position_right_hip_aa" type="double"/>
              <field name="actual_position_right_hip_fe" type="double"/>
              <field name="actual_position_right_knee" type="double"/>
              <field name="actual_velocity_left_ankle" type="double"/>
              <field name="actual_velocity_left_hip_aa" type="double"/>
              <field name="actual_velocity_left_hip_fe" type="double"/>
              <field name="actual_velocity_left_knee" type="double"/>
              <field name="actual_velocity_right_ankle" type="double"/>
              <field name="actual_velocity_right_hip_aa" type="double"/>
              <field name="actual_velocity_right_hip_fe" type="double"/>
              <field name="actual_velocity_right_knee" type="double"/>
              <field name="actual_acceleration_left_ankle" type="double"/>
              <field name="actual_acceleration_left_hip_aa" type="double"/>
              <field name="actual_acceleration_left_hip_fe" type="double"/>
              <field name="actual_acceleration_left_knee" type="double"/>
              <field name="actual_acceleration_right_ankle" type="double"/>
              <field name="actual_acceleration_right_hip_aa" type="double"/>
              <field name="actual_acceleration_right_hip_fe" type="double"/>
              <field name="actual_acceleration_right_knee" type="double"/>
              <field name="actual_jerk_left_ankle" type="double"/>
              <field name="actual_jerk_left_hip_aa" type="double"/>
              <field name="actual_jerk_left_hip_fe" type="double"/>
              <field name="actual_jerk_left_knee" type="double"/>
              <field name="actual_jerk_right_ankle" type="double"/>
              <field name="actual_jerk_right_hip_aa" type="double"/>
              <field name="actual_jerk_right_hip_fe" type="double"/>
              <field name="actual_jerk_right_knee" type="double"/>
              <field name="desired_position_left_ankle" type="double"/>
              <field name="desired_position_left_hip_aa" type="double"/>
              <field name="desired_position_left_hip_fe" type="double"/>
              <field name="desired_position_left_knee" type="double"/>
              <field name="desired_position_right_ankle" type="double"/>
              <field name="desired_position_right_hip_aa" type="double"/>
              <field name="desired_position_right_hip_fe" type="double"/>
              <field name="desired_position_right_knee" type="double"/>
              <field name="desired_velocity_left_ankle" type="double"/>
              <field name="desired_velocity_left_hip_aa" type="double"/>
              <field name="desired_velocity_left_hip_fe" type="double"/>
              <field name="desired_velocity_left_knee" type="double"/>
              <field name="desired_velocity_right_ankle" type="double"/>
              <field name="desired_velocity_right_hip_aa" type="double"/>
              <field name="desired_velocity_right_hip_fe" type="double"/>
              <field name="desired_velocity_right_knee" type="double"/>
              <field name="error_position_left_ankle" type="double"/>
              <field name="error_position_left_hip_aa" type="double"/>
              <field name="error_position_left_hip_fe" type="double"/>
              <field name="error_position_left_knee" type="double"/>
              <field name="error_position_right_ankle" type="double"/>
              <field name="error_position_right_hip_aa" type="double"/>
              <field name="error_position_right_hip_fe" type="double"/>
              <field name="error_position_right_knee" type="double"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="time"><![CDATA[@Retention@ seconds]]></retention>
          <connectors>
            <connector class="fs" name="joint_csv">
              <description><![CDATA[Puts the raw joint values in a csv]]></description>
              <properties>
                <property name="type"><![CDATA[sub]]></property>
                <property name="dateformat"><![CDATA[%Y-%m-%d %H:%M:%S]]></property>
                <property name="fsname"><![CDATA[data/joint_@NOW@.csv]]></property>
                <property name="fstype"><![CDATA[csv]]></property>
                <property name="snapshot"><![CDATA[true]]></property>
                <property name="header"><![CDATA[full]]></property>
              </properties>
            </connector>
          </connectors>
        </window-source>
        <window-aggregate pubsub="true" name="aggregate_imu">
          <description><![CDATA[Selects the last IMU event for joining to the stream.]]></description>
          <schema>
            <fields>
              <field name="dummy_key" type="int64" key="true"/>
              <field name="time" type="stamp"/>
              <field name="roll" type="double"/>
              <field name="pitch" type="double"/>
              <field name="yaw" type="double"/>
              <field name="rotational_velocity_x" type="double"/>
              <field name="rotational_velocity_y" type="double"/>
              <field name="rotational_velocity_z" type="double"/>
              <field name="linear_acceleration_x" type="double"/>
              <field name="linear_acceleration_y" type="double"/>
              <field name="linear_acceleration_z" type="double"/>
            </fields>
          </schema>
          <output>
            <field-expr><![CDATA[ESP_aLast(time)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(roll)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(pitch)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(yaw)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(rotational_velocity_x)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(rotational_velocity_y)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(rotational_velocity_z)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(linear_acceleration_x)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(linear_acceleration_y)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(linear_acceleration_z)]]></field-expr>
          </output>
        </window-aggregate>
        <window-aggregate pubsub="true" name="aggregate_joint">
          <description><![CDATA[Selects the last joint event for joining to the stream.]]></description>
          <schema>
            <fields>
              <field name="dummy_key" type="int64" key="true"/>
              <field name="time" type="stamp"/>
              <field name="actual_position_left_ankle" type="double"/>
              <field name="actual_position_left_hip_aa" type="double"/>
              <field name="actual_position_left_hip_fe" type="double"/>
              <field name="actual_position_left_knee" type="double"/>
              <field name="actual_position_right_ankle" type="double"/>
              <field name="actual_position_right_hip_aa" type="double"/>
              <field name="actual_position_right_hip_fe" type="double"/>
              <field name="actual_position_right_knee" type="double"/>
              <field name="actual_velocity_left_ankle" type="double"/>
              <field name="actual_velocity_left_hip_aa" type="double"/>
              <field name="actual_velocity_left_hip_fe" type="double"/>
              <field name="actual_velocity_left_knee" type="double"/>
              <field name="actual_velocity_right_ankle" type="double"/>
              <field name="actual_velocity_right_hip_aa" type="double"/>
              <field name="actual_velocity_right_hip_fe" type="double"/>
              <field name="actual_velocity_right_knee" type="double"/>
              <field name="actual_acceleration_left_ankle" type="double"/>
              <field name="actual_acceleration_left_hip_aa" type="double"/>
              <field name="actual_acceleration_left_hip_fe" type="double"/>
              <field name="actual_acceleration_left_knee" type="double"/>
              <field name="actual_acceleration_right_ankle" type="double"/>
              <field name="actual_acceleration_right_hip_aa" type="double"/>
              <field name="actual_acceleration_right_hip_fe" type="double"/>
              <field name="actual_acceleration_right_knee" type="double"/>
              <field name="desired_position_left_ankle" type="double"/>
              <field name="desired_position_left_hip_aa" type="double"/>
              <field name="desired_position_left_hip_fe" type="double"/>
              <field name="desired_position_left_knee" type="double"/>
              <field name="desired_position_right_ankle" type="double"/>
              <field name="desired_position_right_hip_aa" type="double"/>
              <field name="desired_position_right_hip_fe" type="double"/>
              <field name="desired_position_right_knee" type="double"/>
              <field name="desired_velocity_left_ankle" type="double"/>
              <field name="desired_velocity_left_hip_aa" type="double"/>
              <field name="desired_velocity_left_hip_fe" type="double"/>
              <field name="desired_velocity_left_knee" type="double"/>
              <field name="desired_velocity_right_ankle" type="double"/>
              <field name="desired_velocity_right_hip_aa" type="double"/>
              <field name="desired_velocity_right_hip_fe" type="double"/>
              <field name="desired_velocity_right_knee" type="double"/>
              <field name="error_position_left_ankle" type="double"/>
              <field name="error_position_left_hip_aa" type="double"/>
              <field name="error_position_left_hip_fe" type="double"/>
              <field name="error_position_left_knee" type="double"/>
              <field name="error_position_right_ankle" type="double"/>
              <field name="error_position_right_hip_aa" type="double"/>
              <field name="error_position_right_hip_fe" type="double"/>
              <field name="error_position_right_knee" type="double"/>
              <field name="absolute_jerk_left_ankle" type="double"/>
              <field name="absolute_jerk_left_hip_aa" type="double"/>
              <field name="absolute_jerk_left_hip_fe" type="double"/>
              <field name="absolute_jerk_left_knee" type="double"/>
              <field name="absolute_jerk_right_ankle" type="double"/>
              <field name="absolute_jerk_right_hip_aa" type="double"/>
              <field name="absolute_jerk_right_hip_fe" type="double"/>
              <field name="absolute_jerk_right_knee" type="double"/>
            </fields>
          </schema>
          <output>
            <field-expr><![CDATA[ESP_aLast(time)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_position_left_ankle)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_position_left_hip_aa)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_position_left_hip_fe)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_position_left_knee)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_position_right_ankle)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_position_right_hip_aa)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_position_right_hip_fe)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_position_right_knee)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_velocity_left_ankle)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_velocity_left_hip_aa)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_velocity_left_hip_fe)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_velocity_left_knee)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_velocity_right_ankle)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_velocity_right_hip_aa)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_velocity_right_hip_fe)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_velocity_right_knee)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_acceleration_left_ankle)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_acceleration_left_hip_aa)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_acceleration_left_hip_fe)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_acceleration_left_knee)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_acceleration_right_ankle)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_acceleration_right_hip_aa)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_acceleration_right_hip_fe)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(actual_acceleration_right_knee)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(desired_position_left_ankle)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(desired_position_left_hip_aa)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(desired_position_left_hip_fe)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(desired_position_left_knee)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(desired_position_right_ankle)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(desired_position_right_hip_aa)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(desired_position_right_hip_fe)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(desired_position_right_knee)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(desired_velocity_left_ankle)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(desired_velocity_left_hip_aa)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(desired_velocity_left_hip_fe)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(desired_velocity_left_knee)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(desired_velocity_right_ankle)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(desired_velocity_right_hip_aa)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(desired_velocity_right_hip_fe)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(desired_velocity_right_knee)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(error_position_left_ankle)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(error_position_left_hip_aa)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(error_position_left_hip_fe)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(error_position_left_knee)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(error_position_right_ankle)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(error_position_right_hip_aa)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(error_position_right_hip_fe)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(error_position_right_knee)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(absolute_jerk_left_ankle)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(absolute_jerk_left_hip_aa)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(absolute_jerk_left_hip_fe)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(absolute_jerk_left_knee)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(absolute_jerk_right_ankle)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(absolute_jerk_right_hip_aa)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(absolute_jerk_right_hip_fe)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(absolute_jerk_right_knee)]]></field-expr>
          </output>
        </window-aggregate>
        <window-aggregate pubsub="true" name="aggregate_ps">
          <description><![CDATA[Selects the last pressure soles event for joining to the stream.]]></description>
          <schema>
            <fields>
              <field name="dummy_key" type="int64" key="true"/>
              <field name="time" type="stamp"/>
              <field name="total_force_left" type="double"/>
              <field name="total_force_right" type="double"/>
              <field name="pressure_left" type="array(dbl)"/>
              <field name="pressure_right" type="array(dbl)"/>
              <field name="cop_left_x" type="double"/>
              <field name="cop_left_y" type="double"/>
              <field name="cop_right_x" type="double"/>
              <field name="cop_right_y" type="double"/>
            </fields>
          </schema>
          <output>
            <field-expr><![CDATA[ESP_aLast(time)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(total_force_left)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(total_force_right)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(pressure_left)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(pressure_right)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(cop_left_x)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(cop_left_y)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(cop_right_x)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(cop_right_y)]]></field-expr>
          </output>
        </window-aggregate>
        <window-aggregate pubsub="true" name="aggregate_com">
          <description><![CDATA[Selects the last center of mass event for joining to the stream.]]></description>
          <schema>
            <fields>
              <field name="dummy_key" type="int64" key="true"/>
              <field name="time" type="stamp"/>
              <field name="com_x" type="double"/>
              <field name="com_y" type="double"/>
              <field name="com_z" type="double"/>
            </fields>
          </schema>
          <output>
            <field-expr><![CDATA[ESP_aLast(time)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(com_x)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(com_y)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(com_z)]]></field-expr>
          </output>
        </window-aggregate>
        <window-join pubsub="true" name="join_joint_com">
          <description><![CDATA[Joins the joint and center of mass events streams with their last events.]]></description>
          <join type="rightouter">
            <conditions>
              <fields left="dummy_key" right="dummy_key"/>
            </conditions>
          </join>
          <output>
            <field-selection name="time_com" source="l_time"/>
            <field-selection name="com_x" source="l_com_x"/>
            <field-selection name="com_y" source="l_com_y"/>
            <field-selection name="com_z" source="l_com_z"/>
            <field-selection name="time_joint" source="r_time"/>
            <field-selection name="actual_position_left_ankle" source="r_actual_position_left_ankle"/>
            <field-selection name="actual_position_left_hip_aa" source="r_actual_position_left_hip_aa"/>
            <field-selection name="actual_position_left_hip_fe" source="r_actual_position_left_hip_fe"/>
            <field-selection name="actual_position_left_knee" source="r_actual_position_left_knee"/>
            <field-selection name="actual_position_right_ankle" source="r_actual_position_right_ankle"/>
            <field-selection name="actual_position_right_hip_aa" source="r_actual_position_right_hip_aa"/>
            <field-selection name="actual_position_right_hip_fe" source="r_actual_position_right_hip_fe"/>
            <field-selection name="actual_position_right_knee" source="r_actual_position_right_knee"/>
            <field-selection name="actual_velocity_left_ankle" source="r_actual_velocity_left_ankle"/>
            <field-selection name="actual_velocity_left_hip_aa" source="r_actual_velocity_left_hip_aa"/>
            <field-selection name="actual_velocity_left_hip_fe" source="r_actual_velocity_left_hip_fe"/>
            <field-selection name="actual_velocity_left_knee" source="r_actual_velocity_left_knee"/>
            <field-selection name="actual_velocity_right_ankle" source="r_actual_velocity_right_ankle"/>
            <field-selection name="actual_velocity_right_hip_aa" source="r_actual_velocity_right_hip_aa"/>
            <field-selection name="actual_velocity_right_hip_fe" source="r_actual_velocity_right_hip_fe"/>
            <field-selection name="actual_velocity_right_knee" source="r_actual_velocity_right_knee"/>
            <field-selection name="actual_acceleration_left_ankle" source="r_actual_acceleration_left_ankle"/>
            <field-selection name="actual_acceleration_left_hip_aa" source="r_actual_acceleration_left_hip_aa"/>
            <field-selection name="actual_acceleration_left_hip_fe" source="r_actual_acceleration_left_hip_fe"/>
            <field-selection name="actual_acceleration_left_knee" source="r_actual_acceleration_left_knee"/>
            <field-selection name="actual_acceleration_right_ankle" source="r_actual_acceleration_right_ankle"/>
            <field-selection name="actual_acceleration_right_hip_aa" source="r_actual_acceleration_right_hip_aa"/>
            <field-selection name="actual_acceleration_right_hip_fe" source="r_actual_acceleration_right_hip_fe"/>
            <field-selection name="actual_acceleration_right_knee" source="r_actual_acceleration_right_knee"/>
            <field-selection name="desired_position_left_ankle" source="r_desired_position_left_ankle"/>
            <field-selection name="desired_position_left_hip_aa" source="r_desired_position_left_hip_aa"/>
            <field-selection name="desired_position_left_hip_fe" source="r_desired_position_left_hip_fe"/>
            <field-selection name="desired_position_left_knee" source="r_desired_position_left_knee"/>
            <field-selection name="desired_position_right_ankle" source="r_desired_position_right_ankle"/>
            <field-selection name="desired_position_right_hip_aa" source="r_desired_position_right_hip_aa"/>
            <field-selection name="desired_position_right_hip_fe" source="r_desired_position_right_hip_fe"/>
            <field-selection name="desired_position_right_knee" source="r_desired_position_right_knee"/>
            <field-selection name="desired_velocity_left_ankle" source="r_desired_velocity_left_ankle"/>
            <field-selection name="desired_velocity_left_hip_aa" source="r_desired_velocity_left_hip_aa"/>
            <field-selection name="desired_velocity_left_hip_fe" source="r_desired_velocity_left_hip_fe"/>
            <field-selection name="desired_velocity_left_knee" source="r_desired_velocity_left_knee"/>
            <field-selection name="desired_velocity_right_ankle" source="r_desired_velocity_right_ankle"/>
            <field-selection name="desired_velocity_right_hip_aa" source="r_desired_velocity_right_hip_aa"/>
            <field-selection name="desired_velocity_right_hip_fe" source="r_desired_velocity_right_hip_fe"/>
            <field-selection name="desired_velocity_right_knee" source="r_desired_velocity_right_knee"/>
            <field-selection name="error_position_left_ankle" source="r_error_position_left_ankle"/>
            <field-selection name="error_position_left_hip_aa" source="r_error_position_left_hip_aa"/>
            <field-selection name="error_position_left_hip_fe" source="r_error_position_left_hip_fe"/>
            <field-selection name="error_position_left_knee" source="r_error_position_left_knee"/>
            <field-selection name="error_position_right_ankle" source="r_error_position_right_ankle"/>
            <field-selection name="error_position_right_hip_aa" source="r_error_position_right_hip_aa"/>
            <field-selection name="error_position_right_hip_fe" source="r_error_position_right_hip_fe"/>
            <field-selection name="error_position_right_knee" source="r_error_position_right_knee"/>
            <field-selection name="absolute_jerk_left_ankle" source="r_absolute_jerk_left_ankle"/>
            <field-selection name="absolute_jerk_left_hip_aa" source="r_absolute_jerk_left_hip_aa"/>
            <field-selection name="absolute_jerk_left_hip_fe" source="r_absolute_jerk_left_hip_fe"/>
            <field-selection name="absolute_jerk_left_knee" source="r_absolute_jerk_left_knee"/>
            <field-selection name="absolute_jerk_right_ankle" source="r_absolute_jerk_right_ankle"/>
            <field-selection name="absolute_jerk_right_hip_aa" source="r_absolute_jerk_right_hip_aa"/>
            <field-selection name="absolute_jerk_right_hip_fe" source="r_absolute_jerk_right_hip_fe"/>
            <field-selection name="absolute_jerk_right_knee" source="r_absolute_jerk_right_knee"/>
          </output>
        </window-join>
        <window-join pubsub="true" name="join_ps">
          <description><![CDATA[Joins the pressure sole events to the main event stream.]]></description>
          <join type="leftouter">
            <conditions>
              <fields left="dummy_key" right="dummy_key"/>
            </conditions>
          </join>
          <output>
            <field-selection name="time_com" source="l_time_com"/>
            <field-selection name="com_x" source="l_com_x"/>
            <field-selection name="com_y" source="l_com_y"/>
            <field-selection name="com_z" source="l_com_z"/>
            <field-selection name="time_joint" source="l_time_joint"/>
            <field-selection name="actual_position_left_ankle" source="l_actual_position_left_ankle"/>
            <field-selection name="actual_position_left_hip_aa" source="l_actual_position_left_hip_aa"/>
            <field-selection name="actual_position_left_hip_fe" source="l_actual_position_left_hip_fe"/>
            <field-selection name="actual_position_left_knee" source="l_actual_position_left_knee"/>
            <field-selection name="actual_position_right_ankle" source="l_actual_position_right_ankle"/>
            <field-selection name="actual_position_right_hip_aa" source="l_actual_position_right_hip_aa"/>
            <field-selection name="actual_position_right_hip_fe" source="l_actual_position_right_hip_fe"/>
            <field-selection name="actual_position_right_knee" source="l_actual_position_right_knee"/>
            <field-selection name="actual_velocity_left_ankle" source="l_actual_velocity_left_ankle"/>
            <field-selection name="actual_velocity_left_hip_aa" source="l_actual_velocity_left_hip_aa"/>
            <field-selection name="actual_velocity_left_hip_fe" source="l_actual_velocity_left_hip_fe"/>
            <field-selection name="actual_velocity_left_knee" source="l_actual_velocity_left_knee"/>
            <field-selection name="actual_velocity_right_ankle" source="l_actual_velocity_right_ankle"/>
            <field-selection name="actual_velocity_right_hip_aa" source="l_actual_velocity_right_hip_aa"/>
            <field-selection name="actual_velocity_right_hip_fe" source="l_actual_velocity_right_hip_fe"/>
            <field-selection name="actual_velocity_right_knee" source="l_actual_velocity_right_knee"/>
            <field-selection name="actual_acceleration_left_ankle" source="l_actual_acceleration_left_ankle"/>
            <field-selection name="actual_acceleration_left_hip_aa" source="l_actual_acceleration_left_hip_aa"/>
            <field-selection name="actual_acceleration_left_hip_fe" source="l_actual_acceleration_left_hip_fe"/>
            <field-selection name="actual_acceleration_left_knee" source="l_actual_acceleration_left_knee"/>
            <field-selection name="actual_acceleration_right_ankle" source="l_actual_acceleration_right_ankle"/>
            <field-selection name="actual_acceleration_right_hip_aa" source="l_actual_acceleration_right_hip_aa"/>
            <field-selection name="actual_acceleration_right_hip_fe" source="l_actual_acceleration_right_hip_fe"/>
            <field-selection name="actual_acceleration_right_knee" source="l_actual_acceleration_right_knee"/>
            <field-selection name="desired_position_left_ankle" source="l_desired_position_left_ankle"/>
            <field-selection name="desired_position_left_hip_aa" source="l_desired_position_left_hip_aa"/>
            <field-selection name="desired_position_left_hip_fe" source="l_desired_position_left_hip_fe"/>
            <field-selection name="desired_position_left_knee" source="l_desired_position_left_knee"/>
            <field-selection name="desired_position_right_ankle" source="l_desired_position_right_ankle"/>
            <field-selection name="desired_position_right_hip_aa" source="l_desired_position_right_hip_aa"/>
            <field-selection name="desired_position_right_hip_fe" source="l_desired_position_right_hip_fe"/>
            <field-selection name="desired_position_right_knee" source="l_desired_position_right_knee"/>
            <field-selection name="desired_velocity_left_ankle" source="l_desired_velocity_left_ankle"/>
            <field-selection name="desired_velocity_left_hip_aa" source="l_desired_velocity_left_hip_aa"/>
            <field-selection name="desired_velocity_left_hip_fe" source="l_desired_velocity_left_hip_fe"/>
            <field-selection name="desired_velocity_left_knee" source="l_desired_velocity_left_knee"/>
            <field-selection name="desired_velocity_right_ankle" source="l_desired_velocity_right_ankle"/>
            <field-selection name="desired_velocity_right_hip_aa" source="l_desired_velocity_right_hip_aa"/>
            <field-selection name="desired_velocity_right_hip_fe" source="l_desired_velocity_right_hip_fe"/>
            <field-selection name="desired_velocity_right_knee" source="l_desired_velocity_right_knee"/>
            <field-selection name="error_position_left_ankle" source="l_error_position_left_ankle"/>
            <field-selection name="error_position_left_hip_aa" source="l_error_position_left_hip_aa"/>
            <field-selection name="error_position_left_hip_fe" source="l_error_position_left_hip_fe"/>
            <field-selection name="error_position_left_knee" source="l_error_position_left_knee"/>
            <field-selection name="error_position_right_ankle" source="l_error_position_right_ankle"/>
            <field-selection name="error_position_right_hip_aa" source="l_error_position_right_hip_aa"/>
            <field-selection name="error_position_right_hip_fe" source="l_error_position_right_hip_fe"/>
            <field-selection name="error_position_right_knee" source="l_error_position_right_knee"/>
            <field-selection name="time_ps" source="r_time"/>
            <field-selection name="total_force_left" source="r_total_force_left"/>
            <field-selection name="total_force_right" source="r_total_force_right"/>
            <field-selection name="pressure_left" source="r_pressure_left"/>
            <field-selection name="pressure_right" source="r_pressure_right"/>
            <field-selection name="cop_left_x" source="r_cop_left_x"/>
            <field-selection name="cop_left_y" source="r_cop_left_y"/>
            <field-selection name="cop_right_x" source="r_cop_right_x"/>
            <field-selection name="cop_right_y" source="r_cop_right_y"/>
            <field-selection name="absolute_jerk_left_ankle" source="l_absolute_jerk_left_ankle"/>
            <field-selection name="absolute_jerk_left_hip_aa" source="l_absolute_jerk_left_hip_aa"/>
            <field-selection name="absolute_jerk_left_hip_fe" source="l_absolute_jerk_left_hip_fe"/>
            <field-selection name="absolute_jerk_left_knee" source="l_absolute_jerk_left_knee"/>
            <field-selection name="absolute_jerk_right_ankle" source="l_absolute_jerk_right_ankle"/>
            <field-selection name="absolute_jerk_right_hip_aa" source="l_absolute_jerk_right_hip_aa"/>
            <field-selection name="absolute_jerk_right_hip_fe" source="l_absolute_jerk_right_hip_fe"/>
            <field-selection name="absolute_jerk_right_knee" source="l_absolute_jerk_right_knee"/>
          </output>
        </window-join>
        <window-join pubsub="true" name="join_imu">
          <description><![CDATA[Joins IMU events to the main event stream.]]></description>
          <join type="leftouter">
            <conditions>
              <fields left="dummy_key" right="dummy_key"/>
            </conditions>
          </join>
          <output>
            <field-selection name="time_com" source="l_time_com"/>
            <field-selection name="com_x" source="l_com_x"/>
            <field-selection name="com_y" source="l_com_y"/>
            <field-selection name="com_z" source="l_com_z"/>
            <field-selection name="time_joint" source="l_time_joint"/>
            <field-selection name="actual_position_left_ankle" source="l_actual_position_left_ankle"/>
            <field-selection name="actual_position_left_hip_aa" source="l_actual_position_left_hip_aa"/>
            <field-selection name="actual_position_left_hip_fe" source="l_actual_position_left_hip_fe"/>
            <field-selection name="actual_position_left_knee" source="l_actual_position_left_knee"/>
            <field-selection name="actual_position_right_ankle" source="l_actual_position_right_ankle"/>
            <field-selection name="actual_position_right_hip_aa" source="l_actual_position_right_hip_aa"/>
            <field-selection name="actual_position_right_hip_fe" source="l_actual_position_right_hip_fe"/>
            <field-selection name="actual_position_right_knee" source="l_actual_position_right_knee"/>
            <field-selection name="actual_velocity_left_ankle" source="l_actual_velocity_left_ankle"/>
            <field-selection name="actual_velocity_left_hip_aa" source="l_actual_velocity_left_hip_aa"/>
            <field-selection name="actual_velocity_left_hip_fe" source="l_actual_velocity_left_hip_fe"/>
            <field-selection name="actual_velocity_left_knee" source="l_actual_velocity_left_knee"/>
            <field-selection name="actual_velocity_right_ankle" source="l_actual_velocity_right_ankle"/>
            <field-selection name="actual_velocity_right_hip_aa" source="l_actual_velocity_right_hip_aa"/>
            <field-selection name="actual_velocity_right_hip_fe" source="l_actual_velocity_right_hip_fe"/>
            <field-selection name="actual_velocity_right_knee" source="l_actual_velocity_right_knee"/>
            <field-selection name="actual_acceleration_left_ankle" source="l_actual_acceleration_left_ankle"/>
            <field-selection name="actual_acceleration_left_hip_aa" source="l_actual_acceleration_left_hip_aa"/>
            <field-selection name="actual_acceleration_left_hip_fe" source="l_actual_acceleration_left_hip_fe"/>
            <field-selection name="actual_acceleration_left_knee" source="l_actual_acceleration_left_knee"/>
            <field-selection name="actual_acceleration_right_ankle" source="l_actual_acceleration_right_ankle"/>
            <field-selection name="actual_acceleration_right_hip_aa" source="l_actual_acceleration_right_hip_aa"/>
            <field-selection name="actual_acceleration_right_hip_fe" source="l_actual_acceleration_right_hip_fe"/>
            <field-selection name="actual_acceleration_right_knee" source="l_actual_acceleration_right_knee"/>
            <field-selection name="desired_position_left_ankle" source="l_desired_position_left_ankle"/>
            <field-selection name="desired_position_left_hip_aa" source="l_desired_position_left_hip_aa"/>
            <field-selection name="desired_position_left_hip_fe" source="l_desired_position_left_hip_fe"/>
            <field-selection name="desired_position_left_knee" source="l_desired_position_left_knee"/>
            <field-selection name="desired_position_right_ankle" source="l_desired_position_right_ankle"/>
            <field-selection name="desired_position_right_hip_aa" source="l_desired_position_right_hip_aa"/>
            <field-selection name="desired_position_right_hip_fe" source="l_desired_position_right_hip_fe"/>
            <field-selection name="desired_position_right_knee" source="l_desired_position_right_knee"/>
            <field-selection name="desired_velocity_left_ankle" source="l_desired_velocity_left_ankle"/>
            <field-selection name="desired_velocity_left_hip_aa" source="l_desired_velocity_left_hip_aa"/>
            <field-selection name="desired_velocity_left_hip_fe" source="l_desired_velocity_left_hip_fe"/>
            <field-selection name="desired_velocity_left_knee" source="l_desired_velocity_left_knee"/>
            <field-selection name="desired_velocity_right_ankle" source="l_desired_velocity_right_ankle"/>
            <field-selection name="desired_velocity_right_hip_aa" source="l_desired_velocity_right_hip_aa"/>
            <field-selection name="desired_velocity_right_hip_fe" source="l_desired_velocity_right_hip_fe"/>
            <field-selection name="desired_velocity_right_knee" source="l_desired_velocity_right_knee"/>
            <field-selection name="error_position_left_ankle" source="l_error_position_left_ankle"/>
            <field-selection name="error_position_left_hip_aa" source="l_error_position_left_hip_aa"/>
            <field-selection name="error_position_left_hip_fe" source="l_error_position_left_hip_fe"/>
            <field-selection name="error_position_left_knee" source="l_error_position_left_knee"/>
            <field-selection name="error_position_right_ankle" source="l_error_position_right_ankle"/>
            <field-selection name="error_position_right_hip_aa" source="l_error_position_right_hip_aa"/>
            <field-selection name="error_position_right_hip_fe" source="l_error_position_right_hip_fe"/>
            <field-selection name="error_position_right_knee" source="l_error_position_right_knee"/>
            <field-selection name="time_ps" source="l_time_ps"/>
            <field-selection name="total_force_left" source="l_total_force_left"/>
            <field-selection name="total_force_right" source="l_total_force_right"/>
            <field-selection name="pressure_left" source="l_pressure_left"/>
            <field-selection name="pressure_right" source="l_pressure_right"/>
            <field-selection name="cop_left_x" source="l_cop_left_x"/>
            <field-selection name="cop_left_y" source="l_cop_left_y"/>
            <field-selection name="cop_right_x" source="l_cop_right_x"/>
            <field-selection name="cop_right_y" source="l_cop_right_y"/>
            <field-selection name="time_imu" source="r_time"/>
            <field-selection name="roll" source="r_roll"/>
            <field-selection name="pitch" source="r_pitch"/>
            <field-selection name="yaw" source="r_yaw"/>
            <field-selection name="rotational_velocity_x" source="r_rotational_velocity_x"/>
            <field-selection name="rotational_velocity_y" source="r_rotational_velocity_y"/>
            <field-selection name="rotational_velocity_z" source="r_rotational_velocity_z"/>
            <field-selection name="linear_acceleration_x" source="r_linear_acceleration_x"/>
            <field-selection name="linear_acceleration_y" source="r_linear_acceleration_y"/>
            <field-selection name="linear_acceleration_z" source="r_linear_acceleration_z"/>
            <field-selection name="absolute_jerk_left_ankle" source="l_absolute_jerk_left_ankle"/>
            <field-selection name="absolute_jerk_left_hip_aa" source="l_absolute_jerk_left_hip_aa"/>
            <field-selection name="absolute_jerk_left_hip_fe" source="l_absolute_jerk_left_hip_fe"/>
            <field-selection name="absolute_jerk_left_knee" source="l_absolute_jerk_left_knee"/>
            <field-selection name="absolute_jerk_right_ankle" source="l_absolute_jerk_right_ankle"/>
            <field-selection name="absolute_jerk_right_hip_aa" source="l_absolute_jerk_right_hip_aa"/>
            <field-selection name="absolute_jerk_right_hip_fe" source="l_absolute_jerk_right_hip_fe"/>
            <field-selection name="absolute_jerk_right_knee" source="l_absolute_jerk_right_knee"/>
          </output>
        </window-join>
        <window-join pubsub="true" name="join_gait">
          <description><![CDATA[Joins gait events to the main event stream.]]></description>
          <join type="leftouter">
            <conditions>
              <fields left="dummy_key" right="dummy_key"/>
            </conditions>
          </join>
          <output>
            <field-selection name="SEQUENCE" source="r_SEQUENCE"/>
            <field-selection name="time_com" source="l_time_com"/>
            <field-selection name="com_x" source="l_com_x"/>
            <field-selection name="com_y" source="l_com_y"/>
            <field-selection name="com_z" source="l_com_z"/>
            <field-selection name="time_joint" source="l_time_joint"/>
            <field-selection name="actual_position_left_ankle" source="l_actual_position_left_ankle"/>
            <field-selection name="actual_position_left_hip_aa" source="l_actual_position_left_hip_aa"/>
            <field-selection name="actual_position_left_hip_fe" source="l_actual_position_left_hip_fe"/>
            <field-selection name="actual_position_left_knee" source="l_actual_position_left_knee"/>
            <field-selection name="actual_position_right_ankle" source="l_actual_position_right_ankle"/>
            <field-selection name="actual_position_right_hip_aa" source="l_actual_position_right_hip_aa"/>
            <field-selection name="actual_position_right_hip_fe" source="l_actual_position_right_hip_fe"/>
            <field-selection name="actual_position_right_knee" source="l_actual_position_right_knee"/>
            <field-selection name="actual_velocity_left_ankle" source="l_actual_velocity_left_ankle"/>
            <field-selection name="actual_velocity_left_hip_aa" source="l_actual_velocity_left_hip_aa"/>
            <field-selection name="actual_velocity_left_hip_fe" source="l_actual_velocity_left_hip_fe"/>
            <field-selection name="actual_velocity_left_knee" source="l_actual_velocity_left_knee"/>
            <field-selection name="actual_velocity_right_ankle" source="l_actual_velocity_right_ankle"/>
            <field-selection name="actual_velocity_right_hip_aa" source="l_actual_velocity_right_hip_aa"/>
            <field-selection name="actual_velocity_right_hip_fe" source="l_actual_velocity_right_hip_fe"/>
            <field-selection name="actual_velocity_right_knee" source="l_actual_velocity_right_knee"/>
            <field-selection name="actual_acceleration_left_ankle" source="l_actual_acceleration_left_ankle"/>
            <field-selection name="actual_acceleration_left_hip_aa" source="l_actual_acceleration_left_hip_aa"/>
            <field-selection name="actual_acceleration_left_hip_fe" source="l_actual_acceleration_left_hip_fe"/>
            <field-selection name="actual_acceleration_left_knee" source="l_actual_acceleration_left_knee"/>
            <field-selection name="actual_acceleration_right_ankle" source="l_actual_acceleration_right_ankle"/>
            <field-selection name="actual_acceleration_right_hip_aa" source="l_actual_acceleration_right_hip_aa"/>
            <field-selection name="actual_acceleration_right_hip_fe" source="l_actual_acceleration_right_hip_fe"/>
            <field-selection name="actual_acceleration_right_knee" source="l_actual_acceleration_right_knee"/>
            <field-selection name="desired_position_left_ankle" source="l_desired_position_left_ankle"/>
            <field-selection name="desired_position_left_hip_aa" source="l_desired_position_left_hip_aa"/>
            <field-selection name="desired_position_left_hip_fe" source="l_desired_position_left_hip_fe"/>
            <field-selection name="desired_position_left_knee" source="l_desired_position_left_knee"/>
            <field-selection name="desired_position_right_ankle" source="l_desired_position_right_ankle"/>
            <field-selection name="desired_position_right_hip_aa" source="l_desired_position_right_hip_aa"/>
            <field-selection name="desired_position_right_hip_fe" source="l_desired_position_right_hip_fe"/>
            <field-selection name="desired_position_right_knee" source="l_desired_position_right_knee"/>
            <field-selection name="desired_velocity_left_ankle" source="l_desired_velocity_left_ankle"/>
            <field-selection name="desired_velocity_left_hip_aa" source="l_desired_velocity_left_hip_aa"/>
            <field-selection name="desired_velocity_left_hip_fe" source="l_desired_velocity_left_hip_fe"/>
            <field-selection name="desired_velocity_left_knee" source="l_desired_velocity_left_knee"/>
            <field-selection name="desired_velocity_right_ankle" source="l_desired_velocity_right_ankle"/>
            <field-selection name="desired_velocity_right_hip_aa" source="l_desired_velocity_right_hip_aa"/>
            <field-selection name="desired_velocity_right_hip_fe" source="l_desired_velocity_right_hip_fe"/>
            <field-selection name="desired_velocity_right_knee" source="l_desired_velocity_right_knee"/>
            <field-selection name="error_position_left_ankle" source="l_error_position_left_ankle"/>
            <field-selection name="error_position_left_hip_aa" source="l_error_position_left_hip_aa"/>
            <field-selection name="error_position_left_hip_fe" source="l_error_position_left_hip_fe"/>
            <field-selection name="error_position_left_knee" source="l_error_position_left_knee"/>
            <field-selection name="error_position_right_ankle" source="l_error_position_right_ankle"/>
            <field-selection name="error_position_right_hip_aa" source="l_error_position_right_hip_aa"/>
            <field-selection name="error_position_right_hip_fe" source="l_error_position_right_hip_fe"/>
            <field-selection name="error_position_right_knee" source="l_error_position_right_knee"/>
            <field-selection name="time_ps" source="l_time_ps"/>
            <field-selection name="total_force_left" source="l_total_force_left"/>
            <field-selection name="total_force_right" source="l_total_force_right"/>
            <field-selection name="pressure_left" source="l_pressure_left"/>
            <field-selection name="pressure_right" source="l_pressure_right"/>
            <field-selection name="cop_left_x" source="l_cop_left_x"/>
            <field-selection name="cop_left_y" source="l_cop_left_y"/>
            <field-selection name="cop_right_x" source="l_cop_right_x"/>
            <field-selection name="cop_right_y" source="l_cop_right_y"/>
            <field-selection name="time_imu" source="l_time_imu"/>
            <field-selection name="roll" source="l_roll"/>
            <field-selection name="pitch" source="l_pitch"/>
            <field-selection name="yaw" source="l_yaw"/>
            <field-selection name="rotational_velocity_x" source="l_rotational_velocity_x"/>
            <field-selection name="rotational_velocity_y" source="l_rotational_velocity_y"/>
            <field-selection name="rotational_velocity_z" source="l_rotational_velocity_z"/>
            <field-selection name="linear_acceleration_x" source="l_linear_acceleration_x"/>
            <field-selection name="linear_acceleration_y" source="l_linear_acceleration_y"/>
            <field-selection name="linear_acceleration_z" source="l_linear_acceleration_z"/>
            <field-selection name="time_gait" source="r_time"/>
            <field-selection name="gait_name" source="r_gait_name"/>
            <field-selection name="subgait_name" source="r_subgait_name"/>
            <field-selection name="version" source="r_version"/>
            <field-selection name="gait_type" source="r_gait_type"/>
            <field-selection name="absolute_jerk_left_ankle" source="l_absolute_jerk_left_ankle"/>
            <field-selection name="absolute_jerk_left_hip_aa" source="l_absolute_jerk_left_hip_aa"/>
            <field-selection name="absolute_jerk_left_hip_fe" source="l_absolute_jerk_left_hip_fe"/>
            <field-selection name="absolute_jerk_left_knee" source="l_absolute_jerk_left_knee"/>
            <field-selection name="absolute_jerk_right_ankle" source="l_absolute_jerk_right_ankle"/>
            <field-selection name="absolute_jerk_right_hip_aa" source="l_absolute_jerk_right_hip_aa"/>
            <field-selection name="absolute_jerk_right_hip_fe" source="l_absolute_jerk_right_hip_fe"/>
            <field-selection name="absolute_jerk_right_knee" source="l_absolute_jerk_right_knee"/>
          </output>
        </window-join>
        <window-aggregate pubsub="true" name="aggregate_over_gait">
          <description><![CDATA[Aggregates relevant statistics per gait.]]></description>
          <schema>
            <fields>
              <field name="SEQUENCE" type="int64" key="true"/>
              <field name="gait_name" type="string"/>
              <field name="time_gait" type="stamp"/>
              <field name="subgait_name" type="string"/>
              <field name="version" type="string"/>
              <field name="gait_type" type="string"/>
              <field name="min_com_x" type="double"/>
              <field name="min_com_y" type="double"/>
              <field name="min_com_z" type="double"/>
              <field name="max_com_x" type="double"/>
              <field name="max_com_y" type="double"/>
              <field name="max_com_z" type="double"/>
              <field name="max_force_left" type="double"/>
              <field name="max_force_right" type="double"/>
              <field name="mean_force_left" type="double"/>
              <field name="mean_force_right" type="double"/>
              <field name="min_roll" type="double"/>
              <field name="min_pitch" type="double"/>
              <field name="min_yaw" type="double"/>
              <field name="max_roll" type="double"/>
              <field name="max_pitch" type="double"/>
              <field name="max_yaw" type="double"/>
              <field name="max_jerk_left_ankle" type="double"/>
              <field name="max_jerk_left_hip_aa" type="double"/>
              <field name="max_jerk_left_hip_fe" type="double"/>
              <field name="max_jerk_left_knee" type="double"/>
              <field name="max_jerk_right_ankle" type="double"/>
              <field name="max_jerk_right_hip_aa" type="double"/>
              <field name="max_jerk_right_hip_fe" type="double"/>
              <field name="max_jerk_right_knee" type="double"/>
            </fields>
          </schema>
          <output>
            <field-expr><![CDATA[ESP_aLast(gait_name)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(time_gait)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(subgait_name)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(version)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(gait_type)]]></field-expr>
            <field-expr><![CDATA[ESP_aMin(com_x)]]></field-expr>
            <field-expr><![CDATA[ESP_aMin(com_y)]]></field-expr>
            <field-expr><![CDATA[ESP_aMin(com_z)]]></field-expr>
            <field-expr><![CDATA[ESP_aMax(com_x)]]></field-expr>
            <field-expr><![CDATA[ESP_aMax(com_y)]]></field-expr>
            <field-expr><![CDATA[ESP_aMax(com_z)]]></field-expr>
            <field-expr><![CDATA[ESP_aMax(total_force_left)]]></field-expr>
            <field-expr><![CDATA[ESP_aMax(total_force_right)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(total_force_left)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(total_force_right)]]></field-expr>
            <field-expr><![CDATA[ESP_aMin(roll)]]></field-expr>
            <field-expr><![CDATA[ESP_aMin(pitch)]]></field-expr>
            <field-expr><![CDATA[ESP_aMin(yaw)]]></field-expr>
            <field-expr><![CDATA[ESP_aMax(roll)]]></field-expr>
            <field-expr><![CDATA[ESP_aMax(pitch)]]></field-expr>
            <field-expr><![CDATA[ESP_aMax(yaw)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(absolute_jerk_left_ankle)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(absolute_jerk_left_hip_aa)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(absolute_jerk_left_hip_fe)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(absolute_jerk_left_knee)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(absolute_jerk_right_ankle)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(absolute_jerk_right_hip_aa)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(absolute_jerk_right_hip_fe)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(absolute_jerk_right_knee)]]></field-expr>
          </output>
        </window-aggregate>
        <window-compute pubsub="true" name="absolute_jerk">
          <description><![CDATA[Take the absolute value for the jerk.]]></description>
          <schema>
            <fields>
              <field name="SEQUENCE" type="int64" key="true"/>
              <field name="dummy_key" type="int64"/>
              <field name="time" type="stamp"/>
              <field name="actual_position_left_ankle" type="double"/>
              <field name="actual_position_left_hip_aa" type="double"/>
              <field name="actual_position_left_hip_fe" type="double"/>
              <field name="actual_position_left_knee" type="double"/>
              <field name="actual_position_right_ankle" type="double"/>
              <field name="actual_position_right_hip_aa" type="double"/>
              <field name="actual_position_right_hip_fe" type="double"/>
              <field name="actual_position_right_knee" type="double"/>
              <field name="actual_velocity_left_ankle" type="double"/>
              <field name="actual_velocity_left_hip_aa" type="double"/>
              <field name="actual_velocity_left_hip_fe" type="double"/>
              <field name="actual_velocity_left_knee" type="double"/>
              <field name="actual_velocity_right_ankle" type="double"/>
              <field name="actual_velocity_right_hip_aa" type="double"/>
              <field name="actual_velocity_right_hip_fe" type="double"/>
              <field name="actual_velocity_right_knee" type="double"/>
              <field name="actual_acceleration_left_ankle" type="double"/>
              <field name="actual_acceleration_left_hip_aa" type="double"/>
              <field name="actual_acceleration_left_hip_fe" type="double"/>
              <field name="actual_acceleration_left_knee" type="double"/>
              <field name="actual_acceleration_right_ankle" type="double"/>
              <field name="actual_acceleration_right_hip_aa" type="double"/>
              <field name="actual_acceleration_right_hip_fe" type="double"/>
              <field name="actual_acceleration_right_knee" type="double"/>
              <field name="absolute_jerk_left_ankle" type="double"/>
              <field name="absolute_jerk_left_hip_aa" type="double"/>
              <field name="absolute_jerk_left_hip_fe" type="double"/>
              <field name="absolute_jerk_left_knee" type="double"/>
              <field name="absolute_jerk_right_ankle" type="double"/>
              <field name="absolute_jerk_right_hip_aa" type="double"/>
              <field name="absolute_jerk_right_hip_fe" type="double"/>
              <field name="absolute_jerk_right_knee" type="double"/>
              <field name="desired_position_left_ankle" type="double"/>
              <field name="desired_position_left_hip_aa" type="double"/>
              <field name="desired_position_left_hip_fe" type="double"/>
              <field name="desired_position_left_knee" type="double"/>
              <field name="desired_position_right_ankle" type="double"/>
              <field name="desired_position_right_hip_aa" type="double"/>
              <field name="desired_position_right_hip_fe" type="double"/>
              <field name="desired_position_right_knee" type="double"/>
              <field name="desired_velocity_left_ankle" type="double"/>
              <field name="desired_velocity_left_hip_aa" type="double"/>
              <field name="desired_velocity_left_hip_fe" type="double"/>
              <field name="desired_velocity_left_knee" type="double"/>
              <field name="desired_velocity_right_ankle" type="double"/>
              <field name="desired_velocity_right_hip_aa" type="double"/>
              <field name="desired_velocity_right_hip_fe" type="double"/>
              <field name="desired_velocity_right_knee" type="double"/>
              <field name="error_position_left_ankle" type="double"/>
              <field name="error_position_left_hip_aa" type="double"/>
              <field name="error_position_left_hip_fe" type="double"/>
              <field name="error_position_left_knee" type="double"/>
              <field name="error_position_right_ankle" type="double"/>
              <field name="error_position_right_hip_aa" type="double"/>
              <field name="error_position_right_hip_fe" type="double"/>
              <field name="error_position_right_knee" type="double"/>
            </fields>
          </schema>
          <output>
            <field-expr><![CDATA[dummy_key]]></field-expr>
            <field-expr><![CDATA[time]]></field-expr>
            <field-expr><![CDATA[actual_position_left_ankle]]></field-expr>
            <field-expr><![CDATA[actual_position_left_hip_aa]]></field-expr>
            <field-expr><![CDATA[actual_position_left_hip_fe]]></field-expr>
            <field-expr><![CDATA[actual_position_left_knee]]></field-expr>
            <field-expr><![CDATA[actual_position_right_ankle]]></field-expr>
            <field-expr><![CDATA[actual_position_right_hip_aa]]></field-expr>
            <field-expr><![CDATA[actual_position_right_hip_fe]]></field-expr>
            <field-expr><![CDATA[actual_position_right_knee]]></field-expr>
            <field-expr><![CDATA[actual_velocity_left_ankle]]></field-expr>
            <field-expr><![CDATA[actual_velocity_left_hip_aa]]></field-expr>
            <field-expr><![CDATA[actual_velocity_left_hip_fe]]></field-expr>
            <field-expr><![CDATA[actual_velocity_left_knee]]></field-expr>
            <field-expr><![CDATA[actual_velocity_right_ankle]]></field-expr>
            <field-expr><![CDATA[actual_velocity_right_hip_aa]]></field-expr>
            <field-expr><![CDATA[actual_velocity_right_hip_fe]]></field-expr>
            <field-expr><![CDATA[actual_velocity_right_knee]]></field-expr>
            <field-expr><![CDATA[actual_acceleration_left_ankle]]></field-expr>
            <field-expr><![CDATA[actual_acceleration_left_hip_aa]]></field-expr>
            <field-expr><![CDATA[actual_acceleration_left_hip_fe]]></field-expr>
            <field-expr><![CDATA[actual_acceleration_left_knee]]></field-expr>
            <field-expr><![CDATA[actual_acceleration_right_ankle]]></field-expr>
            <field-expr><![CDATA[actual_acceleration_right_hip_aa]]></field-expr>
            <field-expr><![CDATA[actual_acceleration_right_hip_fe]]></field-expr>
            <field-expr><![CDATA[actual_acceleration_right_knee]]></field-expr>
            <field-expr><![CDATA[ABS(actual_jerk_left_ankle)]]></field-expr>
            <field-expr><![CDATA[ABS(actual_jerk_left_hip_aa)]]></field-expr>
            <field-expr><![CDATA[ABS(actual_jerk_left_hip_fe)]]></field-expr>
            <field-expr><![CDATA[ABS(actual_jerk_left_knee)]]></field-expr>
            <field-expr><![CDATA[ABS(actual_jerk_right_ankle)]]></field-expr>
            <field-expr><![CDATA[ABS(actual_jerk_right_hip_aa)]]></field-expr>
            <field-expr><![CDATA[ABS(actual_jerk_right_hip_fe)]]></field-expr>
            <field-expr><![CDATA[ABS(actual_jerk_right_knee)]]></field-expr>
            <field-expr><![CDATA[desired_position_left_ankle]]></field-expr>
            <field-expr><![CDATA[desired_position_left_hip_aa]]></field-expr>
            <field-expr><![CDATA[desired_position_left_hip_fe]]></field-expr>
            <field-expr><![CDATA[desired_position_left_knee]]></field-expr>
            <field-expr><![CDATA[desired_position_right_ankle]]></field-expr>
            <field-expr><![CDATA[desired_position_right_hip_aa]]></field-expr>
            <field-expr><![CDATA[desired_position_right_hip_fe]]></field-expr>
            <field-expr><![CDATA[desired_position_right_knee]]></field-expr>
            <field-expr><![CDATA[desired_velocity_left_ankle]]></field-expr>
            <field-expr><![CDATA[desired_velocity_left_hip_aa]]></field-expr>
            <field-expr><![CDATA[desired_velocity_left_hip_fe]]></field-expr>
            <field-expr><![CDATA[desired_velocity_left_knee]]></field-expr>
            <field-expr><![CDATA[desired_velocity_right_ankle]]></field-expr>
            <field-expr><![CDATA[desired_velocity_right_hip_aa]]></field-expr>
            <field-expr><![CDATA[desired_velocity_right_hip_fe]]></field-expr>
            <field-expr><![CDATA[desired_velocity_right_knee]]></field-expr>
            <field-expr><![CDATA[error_position_left_ankle]]></field-expr>
            <field-expr><![CDATA[error_position_left_hip_aa]]></field-expr>
            <field-expr><![CDATA[error_position_left_hip_fe]]></field-expr>
            <field-expr><![CDATA[error_position_left_knee]]></field-expr>
            <field-expr><![CDATA[error_position_right_ankle]]></field-expr>
            <field-expr><![CDATA[error_position_right_hip_aa]]></field-expr>
            <field-expr><![CDATA[error_position_right_hip_fe]]></field-expr>
            <field-expr><![CDATA[error_position_right_knee]]></field-expr>
          </output>
        </window-compute>
        <window-remove-state remove="deletes retentionUpdates retentionDeletes updateBlockDeletes" pubsub="true" name="RemoveState1">
          <connectors>
            <connector class="fs" name="aggregate_over_gait_csv">
              <description><![CDATA[Puts the aggregated over gait data in csv file]]></description>
              <properties>
                <property name="type"><![CDATA[sub]]></property>
                <property name="dateformat"><![CDATA[%Y-%m-%d %H:%M:%S]]></property>
                <property name="fsname"><![CDATA[data/unprocessed_aggregate_over_gait_@NOW@.csv]]></property>
                <property name="fstype"><![CDATA[csv]]></property>
                <property name="snapshot"><![CDATA[true]]></property>
                <property name="header"><![CDATA[full]]></property>
              </properties>
            </connector>
          </connectors>
        </window-remove-state>
      </windows>
      <edges>
        <edge source="source_gait" target="aggregate_gait"/>
        <edge source="source_imu" target="aggregate_imu"/>
        <edge source="source_ps" target="aggregate_ps"/>
        <edge source="source_com" target="aggregate_com"/>
        <edge source="aggregate_com" target="join_joint_com" role="left"/>
        <edge source="join_joint_com" target="join_ps" role="left"/>
        <edge source="join_ps" target="join_imu" role="left"/>
        <edge source="aggregate_imu" target="join_imu" role="right"/>
        <edge source="join_imu" target="join_gait" role="left"/>
        <edge source="aggregate_gait" target="join_gait" role="right"/>
        <edge source="join_gait" target="aggregate_over_gait"/>
        <edge source="aggregate_joint" target="join_joint_com" role="right"/>
        <edge source="aggregate_ps" target="join_ps" role="right"/>
        <edge source="source_joint" target="absolute_jerk"/>
        <edge source="absolute_jerk" target="aggregate_joint"/>
        <edge source="aggregate_over_gait" target="RemoveState1"/>
      </edges>
    </contquery>
    <contquery name="control_analysis" include-singletons="true">
      <description><![CDATA[This continuous query is aimed at analyzing the controller.]]></description>
      <windows>
        <window-source pubsub="true" name="source_effort_command">
          <description><![CDATA[Source window for the effort command send to the iMC's.]]></description>
          <schema>
            <fields>
              <field name="dummy_key" type="int32" key="true"/>
              <field name="join_time" type="stamp" key="true"/>
              <field name="SEQUENCE" type="int64"/>
              <field name="time" type="stamp"/>
              <field name="effort_command_left_ankle" type="double"/>
              <field name="effort_command_left_hip_aa" type="double"/>
              <field name="effort_command_left_hip_fe" type="double"/>
              <field name="effort_command_left_knee" type="double"/>
              <field name="effort_command_right_ankle" type="double"/>
              <field name="effort_command_right_hip_aa" type="double"/>
              <field name="effort_command_right_hip_fe" type="double"/>
              <field name="effort_command_right_knee" type="double"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="join_time"><![CDATA[@Retention@ seconds]]></retention>
          <connectors>
            <connector class="fs" name="effort_command_csv">
              <description><![CDATA[Puts the effort commands in a csv file.]]></description>
              <properties>
                <property name="type"><![CDATA[sub]]></property>
                <property name="dateformat"><![CDATA[%Y-%m-%d %H:%M:%S]]></property>
                <property name="fsname"><![CDATA[data/effort_command_@NOW@.csv]]></property>
                <property name="fstype"><![CDATA[csv]]></property>
                <property name="snapshot"><![CDATA[true]]></property>
                <property name="header"><![CDATA[full]]></property>
              </properties>
            </connector>
          </connectors>
        </window-source>
        <window-source pubsub="true" name="source_imc">
          <description><![CDATA[Source window for the iMotionCube states.]]></description>
          <schema>
            <fields>
              <field name="join_time" type="stamp" key="true"/>
              <field name="SEQUENCE" type="int64"/>
              <field name="dummy_key" type="int64"/>
              <field name="time" type="stamp"/>
              <field name="motor_current_left_ankle" type="double"/>
              <field name="motor_current_left_hip_aa" type="double"/>
              <field name="motor_current_left_hip_fe" type="double"/>
              <field name="motor_current_left_knee" type="double"/>
              <field name="motor_current_right_ankle" type="double"/>
              <field name="motor_current_right_hip_aa" type="double"/>
              <field name="motor_current_right_hip_fe" type="double"/>
              <field name="motor_current_right_knee" type="double"/>
              <field name="imc_voltage_left_ankle" type="double"/>
              <field name="imc_voltage_left_hip_aa" type="double"/>
              <field name="imc_voltage_left_hip_fe" type="double"/>
              <field name="imc_voltage_left_knee" type="double"/>
              <field name="imc_voltage_right_ankle" type="double"/>
              <field name="imc_voltage_right_hip_aa" type="double"/>
              <field name="imc_voltage_right_hip_fe" type="double"/>
              <field name="imc_voltage_right_knee" type="double"/>
              <field name="motor_voltage_left_ankle" type="double"/>
              <field name="motor_voltage_left_hip_aa" type="double"/>
              <field name="motor_voltage_left_hip_fe" type="double"/>
              <field name="motor_voltage_left_knee" type="double"/>
              <field name="motor_voltage_right_ankle" type="double"/>
              <field name="motor_voltage_right_hip_aa" type="double"/>
              <field name="motor_voltage_right_hip_fe" type="double"/>
              <field name="motor_voltage_right_knee" type="double"/>
              <field name="absolute_encoder_left_ankle" type="int64"/>
              <field name="absolute_encoder_left_hip_aa" type="int64"/>
              <field name="absolute_encoder_left_hip_fe" type="int64"/>
              <field name="absolute_encoder_left_knee" type="int64"/>
              <field name="absolute_encoder_right_ankle" type="int64"/>
              <field name="absolute_encoder_right_hip_aa" type="int64"/>
              <field name="absolute_encoder_right_hip_fe" type="int64"/>
              <field name="absolute_encoder_right_knee" type="int64"/>
              <field name="incremental_encoder_left_ankle" type="int64"/>
              <field name="incremental_encoder_left_hip_aa" type="int64"/>
              <field name="incremental_encoder_left_hip_fe" type="int64"/>
              <field name="incremental_encoder_left_knee" type="int64"/>
              <field name="incremental_encoder_right_ankle" type="int64"/>
              <field name="incremental_encoder_right_hip_aa" type="int64"/>
              <field name="incremental_encoder_right_hip_fe" type="int64"/>
              <field name="incremental_encoder_right_knee" type="int64"/>
              <field name="absolute_velocity_left_ankle" type="double"/>
              <field name="absolute_velocity_left_hip_aa" type="double"/>
              <field name="absolute_velocity_left_hip_fe" type="double"/>
              <field name="absolute_velocity_left_knee" type="double"/>
              <field name="absolute_velocity_right_ankle" type="double"/>
              <field name="absolute_velocity_right_hip_aa" type="double"/>
              <field name="absolute_velocity_right_hip_fe" type="double"/>
              <field name="absolute_velocity_right_knee" type="double"/>
              <field name="incremental_velocity_left_ankle" type="double"/>
              <field name="incremental_velocity_left_hip_aa" type="double"/>
              <field name="incremental_velocity_left_hip_fe" type="double"/>
              <field name="incremental_velocity_left_knee" type="double"/>
              <field name="incremental_velocity_right_ankle" type="double"/>
              <field name="incremental_velocity_right_hip_aa" type="double"/>
              <field name="incremental_velocity_right_hip_fe" type="double"/>
              <field name="incremental_velocity_right_knee" type="double"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="join_time"><![CDATA[@Retention@ seconds]]></retention>
          <connectors>
            <connector class="fs" name="imc_csv">
              <description><![CDATA[Puts the raw iMotionCube state in a csv file.]]></description>
              <properties>
                <property name="type"><![CDATA[sub]]></property>
                <property name="dateformat"><![CDATA[%Y-%m-%d %H:%M:%S]]></property>
                <property name="fsname"><![CDATA[data/imc_@NOW@.csv]]></property>
                <property name="fstype"><![CDATA[csv]]></property>
                <property name="snapshot"><![CDATA[true]]></property>
                <property name="header"><![CDATA[full]]></property>
              </properties>
            </connector>
          </connectors>
        </window-source>
        <window-source autogen-key="true" insert-only="true" pubsub="true" name="source_gait_control">
          <description><![CDATA[Source window for gait events. control is added, because a similar window is in the gait cq.]]></description>
          <schema>
            <fields>
              <field name="SEQUENCE" type="int64" key="true"/>
              <field name="dummy_key" type="int64"/>
              <field name="time" type="stamp"/>
              <field name="gait_name" type="string"/>
              <field name="subgait_name" type="string"/>
              <field name="version" type="string"/>
              <field name="gait_type" type="string"/>
            </fields>
          </schema>
          <connectors>
            <connector class="fs" name="gait_csv">
              <description><![CDATA[Puts all the gaits in a csv file.]]></description>
              <properties>
                <property name="type"><![CDATA[sub]]></property>
                <property name="dateformat"><![CDATA[%Y-%m-%d %H:%M:%S]]></property>
                <property name="fsname"><![CDATA[data/gait_@NOW@.csv]]></property>
                <property name="fstype"><![CDATA[csv]]></property>
                <property name="snapshot"><![CDATA[true]]></property>
                <property name="header"><![CDATA[full]]></property>
              </properties>
            </connector>
          </connectors>
        </window-source>
        <window-source pubsub="true" name="source_pid_state_left_ankle">
          <description><![CDATA[Source window for the pid state of the controller for the left_ankle.]]></description>
          <schema>
            <fields>
              <field name="time" type="stamp"/>
              <field name="join_time" type="stamp" key="true"/>
              <field name="p_error" type="double"/>
              <field name="i_error" type="double"/>
              <field name="d_error" type="double"/>
              <field name="p_term" type="double"/>
              <field name="i_term" type="double"/>
              <field name="d_term" type="double"/>
              <field name="output" type="double"/>
              <field name="dummy_key" type="int32"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="join_time"><![CDATA[@Retention@ seconds]]></retention>
        </window-source>
        <window-source pubsub="true" name="source_pid_state_left_hip_aa">
          <description><![CDATA[Source window for the pid state of the controller for the left_hip_aa.]]></description>
          <schema>
            <fields>
              <field name="time" type="stamp"/>
              <field name="join_time" type="stamp" key="true"/>
              <field name="p_error" type="double"/>
              <field name="i_error" type="double"/>
              <field name="d_error" type="double"/>
              <field name="p_term" type="double"/>
              <field name="i_term" type="double"/>
              <field name="d_term" type="double"/>
              <field name="output" type="double"/>
              <field name="dummy_key" type="int32"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="join_time"><![CDATA[@Retention@ seconds]]></retention>
        </window-source>
        <window-source pubsub="true" name="source_pid_state_left_hip_fe">
          <description><![CDATA[Source window for the pid state of the controller for the left_hip_fe.]]></description>
          <schema>
            <fields>
              <field name="time" type="stamp"/>
              <field name="join_time" type="stamp" key="true"/>
              <field name="p_error" type="double"/>
              <field name="i_error" type="double"/>
              <field name="d_error" type="double"/>
              <field name="p_term" type="double"/>
              <field name="i_term" type="double"/>
              <field name="d_term" type="double"/>
              <field name="output" type="double"/>
              <field name="dummy_key" type="int32"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="join_time"><![CDATA[@Retention@ seconds]]></retention>
        </window-source>
        <window-source pubsub="true" name="source_pid_state_left_knee">
          <description><![CDATA[Source window for the pid state of the controller for the left_knee.]]></description>
          <schema>
            <fields>
              <field name="time" type="stamp"/>
              <field name="join_time" type="stamp" key="true"/>
              <field name="p_error" type="double"/>
              <field name="i_error" type="double"/>
              <field name="d_error" type="double"/>
              <field name="p_term" type="double"/>
              <field name="i_term" type="double"/>
              <field name="d_term" type="double"/>
              <field name="output" type="double"/>
              <field name="dummy_key" type="int32"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="join_time"><![CDATA[@Retention@ seconds]]></retention>
        </window-source>
        <window-source pubsub="true" name="source_pid_state_right_ankle">
          <description><![CDATA[Source window for the pid state of the controller for the right_ankle.]]></description>
          <schema>
            <fields>
              <field name="time" type="stamp"/>
              <field name="join_time" type="stamp" key="true"/>
              <field name="p_error" type="double"/>
              <field name="i_error" type="double"/>
              <field name="d_error" type="double"/>
              <field name="p_term" type="double"/>
              <field name="i_term" type="double"/>
              <field name="d_term" type="double"/>
              <field name="output" type="double"/>
              <field name="dummy_Key" type="int32"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="join_time"><![CDATA[@Retention@ seconds]]></retention>
        </window-source>
        <window-source pubsub="true" name="source_pid_state_right_hip_aa">
          <description><![CDATA[Source window for the pid state of the controller for the right_hip_aa.]]></description>
          <schema>
            <fields>
              <field name="time" type="stamp"/>
              <field name="join_time" type="stamp" key="true"/>
              <field name="p_error" type="double"/>
              <field name="i_error" type="double"/>
              <field name="d_error" type="double"/>
              <field name="p_term" type="double"/>
              <field name="i_term" type="double"/>
              <field name="d_term" type="double"/>
              <field name="output" type="double"/>
              <field name="dummy_key" type="int32"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="join_time"><![CDATA[@Retention@ seconds]]></retention>
        </window-source>
        <window-source pubsub="true" name="source_pid_state_right_hip_fe">
          <description><![CDATA[Source window for the pid state of the controller for the right_hip_fe.]]></description>
          <schema>
            <fields>
              <field name="time" type="stamp"/>
              <field name="join_time" type="stamp" key="true"/>
              <field name="p_error" type="double"/>
              <field name="i_error" type="double"/>
              <field name="d_error" type="double"/>
              <field name="p_term" type="double"/>
              <field name="i_term" type="double"/>
              <field name="d_term" type="double"/>
              <field name="output" type="double"/>
              <field name="dummy_key" type="int32"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="join_time"><![CDATA[@Retention@ seconds]]></retention>
        </window-source>
        <window-source pubsub="true" name="source_pid_state_right_knee">
          <description><![CDATA[Source window for the pid state of the controller for the right_knee.]]></description>
          <schema>
            <fields>
              <field name="time" type="stamp"/>
              <field name="join_time" type="stamp" key="true"/>
              <field name="p_error" type="double"/>
              <field name="i_error" type="double"/>
              <field name="d_error" type="double"/>
              <field name="p_term" type="double"/>
              <field name="i_term" type="double"/>
              <field name="d_term" type="double"/>
              <field name="output" type="double"/>
              <field name="dummy_key" type="int32"/>
            </fields>
          </schema>
          <retention type="bytime_sliding" field="join_time"><![CDATA[@Retention@ seconds]]></retention>
        </window-source>
        <window-join pubsub="true" name="join_pid_state_left_hip_aa">
          <description><![CDATA[Joins the pid state events of the left_hip_aa to the main pid state event stream.]]></description>
          <join type="inner">
            <conditions>
              <fields left="join_time" right="join_time"/>
            </conditions>
          </join>
          <output>
            <field-selection name="left_ankle_p_error" source="l_p_error"/>
            <field-selection name="left_ankle_i_error" source="l_i_error"/>
            <field-selection name="left_ankle_d_error" source="l_d_error"/>
            <field-selection name="left_ankle_p_term" source="l_p_term"/>
            <field-selection name="left_ankle_i_term" source="l_i_term"/>
            <field-selection name="left_ankle_d_term" source="l_d_term"/>
            <field-selection name="left_ankle_output" source="l_output"/>
            <field-selection name="left_hip_aa_p_error" source="r_p_error"/>
            <field-selection name="left_hip_aa_i_error" source="r_i_error"/>
            <field-selection name="left_hip_aa_d_error" source="r_d_error"/>
            <field-selection name="left_hip_aa_p_term" source="r_p_term"/>
            <field-selection name="left_hip_aa_i_term" source="r_i_term"/>
            <field-selection name="left_hip_aa_d_term" source="r_d_term"/>
            <field-selection name="left_hip_aa_output" source="r_output"/>
          </output>
        </window-join>
        <window-join pubsub="true" name="join_pid_state_left_hip_fe">
          <description><![CDATA[Joins the pid state events of the left_hip_fe to the main pid state event stream.]]></description>
          <join type="inner">
            <conditions>
              <fields left="join_time" right="join_time"/>
            </conditions>
          </join>
          <output>
            <field-selection name="left_ankle_p_error" source="r_left_ankle_p_error"/>
            <field-selection name="left_ankle_i_error" source="r_left_ankle_i_error"/>
            <field-selection name="left_ankle_d_error" source="r_left_ankle_d_error"/>
            <field-selection name="left_ankle_p_term" source="r_left_ankle_p_term"/>
            <field-selection name="left_ankle_i_term" source="r_left_ankle_i_term"/>
            <field-selection name="left_ankle_d_term" source="r_left_ankle_d_term"/>
            <field-selection name="left_ankle_output" source="r_left_ankle_output"/>
            <field-selection name="left_hip_aa_p_error" source="r_left_hip_aa_p_error"/>
            <field-selection name="left_hip_aa_i_error" source="r_left_hip_aa_i_error"/>
            <field-selection name="left_hip_aa_d_error" source="r_left_hip_aa_d_error"/>
            <field-selection name="left_hip_aa_p_term" source="r_left_hip_aa_p_term"/>
            <field-selection name="left_hip_aa_i_term" source="r_left_hip_aa_i_term"/>
            <field-selection name="left_hip_aa_d_term" source="r_left_hip_aa_d_term"/>
            <field-selection name="left_hip_aa_output" source="r_left_hip_aa_output"/>
            <field-selection name="left_hip_fe_p_error" source="l_p_error"/>
            <field-selection name="left_hip_fe_i_error" source="l_i_error"/>
            <field-selection name="left_hip_fe_d_error" source="l_d_error"/>
            <field-selection name="left_hip_fe_p_term" source="l_p_term"/>
            <field-selection name="left_hip_fe_i_term" source="l_i_term"/>
            <field-selection name="left_hip_fe_d_term" source="l_d_term"/>
            <field-selection name="left_hip_fe_output" source="l_output"/>
          </output>
        </window-join>
        <window-join pubsub="true" name="join_pid_state_left_knee">
          <description><![CDATA[Joins the pid state events of the left_knee to the main pid state event stream.]]></description>
          <join type="inner">
            <conditions>
              <fields left="join_time" right="join_time"/>
            </conditions>
          </join>
          <output>
            <field-selection name="left_ankle_p_error" source="l_left_ankle_p_error"/>
            <field-selection name="left_ankle_i_error" source="l_left_ankle_i_error"/>
            <field-selection name="left_ankle_d_error" source="l_left_ankle_d_error"/>
            <field-selection name="left_ankle_p_term" source="l_left_ankle_p_term"/>
            <field-selection name="left_ankle_i_term" source="l_left_ankle_i_term"/>
            <field-selection name="left_ankle_d_term" source="l_left_ankle_d_term"/>
            <field-selection name="left_ankle_output" source="l_left_ankle_output"/>
            <field-selection name="left_hip_aa_p_error" source="l_left_hip_aa_p_error"/>
            <field-selection name="left_hip_aa_i_error" source="l_left_hip_aa_i_error"/>
            <field-selection name="left_hip_aa_p_term" source="l_left_hip_aa_p_term"/>
            <field-selection name="left_hip_aa_i_term" source="l_left_hip_aa_i_term"/>
            <field-selection name="left_hip_aa_d_term" source="l_left_hip_aa_d_term"/>
            <field-selection name="left_hip_aa_output" source="l_left_hip_aa_output"/>
            <field-selection name="left_hip_fe_p_error" source="l_left_hip_fe_p_error"/>
            <field-selection name="left_hip_fe_i_error" source="l_left_hip_fe_i_error"/>
            <field-selection name="left_hip_fe_d_error" source="l_left_hip_fe_d_error"/>
            <field-selection name="left_hip_fe_p_term" source="l_left_hip_fe_p_term"/>
            <field-selection name="left_hip_fe_i_term" source="l_left_hip_fe_i_term"/>
            <field-selection name="left_hip_fe_d_term" source="l_left_hip_fe_d_term"/>
            <field-selection name="left_hip_fe_output" source="l_left_hip_fe_output"/>
            <field-selection name="left_knee_p_error" source="r_p_error"/>
            <field-selection name="left_knee_i_error" source="r_i_error"/>
            <field-selection name="left_knee_d_error" source="r_d_error"/>
            <field-selection name="left_knee_p_term" source="r_p_term"/>
            <field-selection name="left_knee_i_term" source="r_i_term"/>
            <field-selection name="left_knee_d_term" source="r_d_term"/>
            <field-selection name="left_knee_output" source="r_output"/>
          </output>
        </window-join>
        <window-join pubsub="true" name="join_pid_state_right_ankle">
          <description><![CDATA[Joins the pid state events of the right_ankle to the main pid state event stream.]]></description>
          <join type="inner">
            <conditions>
              <fields left="join_time" right="join_time"/>
            </conditions>
          </join>
          <output>
            <field-selection name="left_ankle_p_error" source="r_left_ankle_p_error"/>
            <field-selection name="left_ankle_i_error" source="r_left_ankle_i_error"/>
            <field-selection name="left_ankle_d_error" source="r_left_ankle_d_error"/>
            <field-selection name="left_ankle_p_term" source="r_left_ankle_p_term"/>
            <field-selection name="left_ankle_i_term" source="r_left_ankle_i_term"/>
            <field-selection name="left_ankle_d_term" source="r_left_ankle_d_term"/>
            <field-selection name="left_ankle_output" source="r_left_ankle_output"/>
            <field-selection name="left_hip_aa_p_error" source="r_left_hip_aa_p_error"/>
            <field-selection name="left_hip_aa_i_error" source="r_left_hip_aa_i_error"/>
            <field-selection name="left_hip_aa_p_term" source="r_left_hip_aa_p_term"/>
            <field-selection name="left_hip_aa_i_term" source="r_left_hip_aa_i_term"/>
            <field-selection name="left_hip_aa_d_term" source="r_left_hip_aa_d_term"/>
            <field-selection name="left_hip_aa_output" source="r_left_hip_aa_output"/>
            <field-selection name="left_hip_fe_p_error" source="r_left_hip_fe_p_error"/>
            <field-selection name="left_hip_fe_i_error" source="r_left_hip_fe_i_error"/>
            <field-selection name="left_hip_fe_d_error" source="r_left_hip_fe_d_error"/>
            <field-selection name="left_hip_fe_p_term" source="r_left_hip_fe_p_term"/>
            <field-selection name="left_hip_fe_i_term" source="r_left_hip_fe_i_term"/>
            <field-selection name="left_hip_fe_d_term" source="r_left_hip_fe_d_term"/>
            <field-selection name="left_hip_fe_output" source="r_left_hip_fe_output"/>
            <field-selection name="left_knee_p_error" source="r_left_knee_p_error"/>
            <field-selection name="left_knee_i_error" source="r_left_knee_i_error"/>
            <field-selection name="left_knee_d_error" source="r_left_knee_d_error"/>
            <field-selection name="left_knee_p_term" source="r_left_knee_p_term"/>
            <field-selection name="left_knee_i_term" source="r_left_knee_i_term"/>
            <field-selection name="left_knee_d_term" source="r_left_knee_d_term"/>
            <field-selection name="left_knee_output" source="r_left_knee_output"/>
            <field-selection name="right_ankle_p_error" source="l_p_error"/>
            <field-selection name="right_ankle_i_error" source="l_i_error"/>
            <field-selection name="right_ankle_d_error" source="l_d_error"/>
            <field-selection name="right_ankle_p_term" source="l_p_term"/>
            <field-selection name="right_ankle_i_term" source="l_i_term"/>
            <field-selection name="right_ankle_d_term" source="l_d_term"/>
            <field-selection name="right_ankle_output" source="l_output"/>
          </output>
        </window-join>
        <window-join pubsub="true" name="join_pid_state_right_hip_aa">
          <description><![CDATA[Joins the pid state events of the right_hip_aa to the main pid state event stream.]]></description>
          <join type="inner">
            <conditions>
              <fields left="join_time" right="join_time"/>
            </conditions>
          </join>
          <output>
            <field-selection name="left_ankle_p_error" source="r_left_ankle_p_error"/>
            <field-selection name="left_ankle_i_error" source="r_left_ankle_i_error"/>
            <field-selection name="left_ankle_d_error" source="r_left_ankle_d_error"/>
            <field-selection name="left_ankle_p_term" source="r_left_ankle_p_term"/>
            <field-selection name="left_ankle_i_term" source="r_left_ankle_i_term"/>
            <field-selection name="left_ankle_d_term" source="r_left_ankle_d_term"/>
            <field-selection name="left_ankle_output" source="r_left_ankle_output"/>
            <field-selection name="left_hip_aa_p_error" source="r_left_hip_aa_p_error"/>
            <field-selection name="left_hip_aa_i_error" source="r_left_hip_aa_i_error"/>
            <field-selection name="left_hip_aa_p_term" source="r_left_hip_aa_p_term"/>
            <field-selection name="left_hip_aa_i_term" source="r_left_hip_aa_i_term"/>
            <field-selection name="left_hip_aa_d_term" source="r_left_hip_aa_d_term"/>
            <field-selection name="left_hip_aa_output" source="r_left_hip_aa_output"/>
            <field-selection name="left_hip_fe_p_error" source="r_left_hip_fe_p_error"/>
            <field-selection name="left_hip_fe_i_error" source="r_left_hip_fe_i_error"/>
            <field-selection name="left_hip_fe_d_error" source="r_left_hip_fe_d_error"/>
            <field-selection name="left_hip_fe_p_term" source="r_left_hip_fe_p_term"/>
            <field-selection name="left_hip_fe_i_term" source="r_left_hip_fe_i_term"/>
            <field-selection name="left_hip_fe_d_term" source="r_left_hip_fe_d_term"/>
            <field-selection name="left_hip_fe_output" source="r_left_hip_fe_output"/>
            <field-selection name="left_knee_p_error" source="r_left_knee_p_error"/>
            <field-selection name="left_knee_i_error" source="r_left_knee_i_error"/>
            <field-selection name="left_knee_d_error" source="r_left_knee_d_error"/>
            <field-selection name="left_knee_p_term" source="r_left_knee_p_term"/>
            <field-selection name="left_knee_i_term" source="r_left_knee_i_term"/>
            <field-selection name="left_knee_d_term" source="r_left_knee_d_term"/>
            <field-selection name="left_knee_output" source="r_left_knee_output"/>
            <field-selection name="right_ankle_p_error" source="r_right_ankle_p_error"/>
            <field-selection name="right_ankle_i_error" source="r_right_ankle_i_error"/>
            <field-selection name="right_ankle_d_error" source="r_right_ankle_d_error"/>
            <field-selection name="right_ankle_p_term" source="r_right_ankle_p_term"/>
            <field-selection name="right_ankle_i_term" source="r_right_ankle_i_term"/>
            <field-selection name="right_ankle_d_term" source="r_right_ankle_d_term"/>
            <field-selection name="right_ankle_output" source="r_right_ankle_output"/>
            <field-selection name="right_hip_aa_p_error" source="l_p_error"/>
            <field-selection name="right_hip_aa_i_error" source="l_i_error"/>
            <field-selection name="right_hip_aa_d_error" source="l_d_error"/>
            <field-selection name="right_hip_aa_p_term" source="l_p_term"/>
            <field-selection name="right_hip_aa_i_term" source="l_i_term"/>
            <field-selection name="right_hip_aa_d_term" source="l_d_term"/>
            <field-selection name="right_hip_aa_output" source="l_output"/>
          </output>
        </window-join>
        <window-join pubsub="true" name="join_pid_state_right_hip_fe">
          <description><![CDATA[Joins the pid state events of the right_hip_fe to the main pid state event stream.]]></description>
          <join type="inner">
            <conditions>
              <fields left="join_time" right="join_time"/>
            </conditions>
          </join>
          <output>
            <field-selection name="left_ankle_p_error" source="l_left_ankle_p_error"/>
            <field-selection name="left_ankle_i_error" source="l_left_ankle_i_error"/>
            <field-selection name="left_ankle_d_error" source="l_left_ankle_d_error"/>
            <field-selection name="left_ankle_p_term" source="l_left_ankle_p_term"/>
            <field-selection name="left_ankle_i_term" source="l_left_ankle_i_term"/>
            <field-selection name="left_ankle_d_term" source="l_left_ankle_d_term"/>
            <field-selection name="left_ankle_output" source="l_left_ankle_output"/>
            <field-selection name="left_hip_aa_p_error" source="l_left_hip_aa_p_error"/>
            <field-selection name="left_hip_aa_i_error" source="l_left_hip_aa_i_error"/>
            <field-selection name="left_hip_aa_p_term" source="l_left_hip_aa_p_term"/>
            <field-selection name="left_hip_aa_i_term" source="l_left_hip_aa_i_term"/>
            <field-selection name="left_hip_aa_d_term" source="l_left_hip_aa_d_term"/>
            <field-selection name="left_hip_aa_output" source="l_left_hip_aa_output"/>
            <field-selection name="left_hip_fe_p_error" source="l_left_hip_fe_p_error"/>
            <field-selection name="left_hip_fe_i_error" source="l_left_hip_fe_i_error"/>
            <field-selection name="left_hip_fe_d_error" source="l_left_hip_fe_d_error"/>
            <field-selection name="left_hip_fe_p_term" source="l_left_hip_fe_p_term"/>
            <field-selection name="left_hip_fe_i_term" source="l_left_hip_fe_i_term"/>
            <field-selection name="left_hip_fe_d_term" source="l_left_hip_fe_d_term"/>
            <field-selection name="left_hip_fe_output" source="l_left_hip_fe_output"/>
            <field-selection name="left_knee_p_error" source="l_left_knee_p_error"/>
            <field-selection name="left_knee_i_error" source="l_left_knee_i_error"/>
            <field-selection name="left_knee_d_error" source="l_left_knee_d_error"/>
            <field-selection name="left_knee_p_term" source="l_left_knee_p_term"/>
            <field-selection name="left_knee_i_term" source="l_left_knee_i_term"/>
            <field-selection name="left_knee_d_term" source="l_left_knee_d_term"/>
            <field-selection name="left_knee_output" source="l_left_knee_output"/>
            <field-selection name="right_ankle_p_error" source="l_right_ankle_p_error"/>
            <field-selection name="right_ankle_i_error" source="l_right_ankle_i_error"/>
            <field-selection name="right_ankle_d_error" source="l_right_ankle_d_error"/>
            <field-selection name="right_ankle_p_term" source="l_right_ankle_p_term"/>
            <field-selection name="right_ankle_i_term" source="l_right_ankle_i_term"/>
            <field-selection name="right_ankle_d_term" source="l_right_ankle_d_term"/>
            <field-selection name="right_ankle_output" source="l_right_ankle_output"/>
            <field-selection name="right_hip_aa_p_error" source="l_right_hip_aa_p_error"/>
            <field-selection name="right_hip_aa_i_error" source="l_right_hip_aa_i_error"/>
            <field-selection name="right_hip_aa_d_error" source="l_right_hip_aa_d_error"/>
            <field-selection name="right_hip_aa_p_term" source="l_right_hip_aa_p_term"/>
            <field-selection name="right_hip_aa_i_term" source="l_right_hip_aa_i_term"/>
            <field-selection name="right_hip_aa_d_term" source="l_right_hip_aa_d_term"/>
            <field-selection name="right_hip_aa_output" source="l_right_hip_aa_output"/>
            <field-selection name="right_hip_fe_p_error" source="r_p_error"/>
            <field-selection name="right_hip_fe_i_error" source="r_i_error"/>
            <field-selection name="right_hip_fe_d_error" source="r_d_error"/>
            <field-selection name="right_hip_fe_p_term" source="r_p_term"/>
            <field-selection name="right_hip_fe_i_term" source="r_i_term"/>
            <field-selection name="right_hip_fe_d_term" source="r_d_term"/>
            <field-selection name="right_hip_fe_output" source="r_output"/>
          </output>
        </window-join>
        <window-join pubsub="true" name="join_pid_state_right_knee">
          <description><![CDATA[Joins the pid state events of the right_knee to the main pid state event stream.]]></description>
          <join type="inner">
            <conditions>
              <fields left="join_time" right="join_time"/>
            </conditions>
          </join>
          <output>
            <field-selection name="left_ankle_p_error" source="l_left_ankle_p_error"/>
            <field-selection name="left_ankle_i_error" source="l_left_ankle_i_error"/>
            <field-selection name="left_ankle_d_error" source="l_left_ankle_d_error"/>
            <field-selection name="left_ankle_p_term" source="l_left_ankle_p_term"/>
            <field-selection name="left_ankle_i_term" source="l_left_ankle_i_term"/>
            <field-selection name="left_ankle_d_term" source="l_left_ankle_d_term"/>
            <field-selection name="left_ankle_output" source="l_left_ankle_output"/>
            <field-selection name="left_hip_aa_p_error" source="l_left_hip_aa_p_error"/>
            <field-selection name="left_hip_aa_i_error" source="l_left_hip_aa_i_error"/>
            <field-selection name="left_hip_aa_p_term" source="l_left_hip_aa_p_term"/>
            <field-selection name="left_hip_aa_i_term" source="l_left_hip_aa_i_term"/>
            <field-selection name="left_hip_aa_d_term" source="l_left_hip_aa_d_term"/>
            <field-selection name="left_hip_aa_output" source="l_left_hip_aa_output"/>
            <field-selection name="left_hip_fe_p_error" source="l_left_hip_fe_p_error"/>
            <field-selection name="left_hip_fe_i_error" source="l_left_hip_fe_i_error"/>
            <field-selection name="left_hip_fe_d_error" source="l_left_hip_fe_d_error"/>
            <field-selection name="left_hip_fe_p_term" source="l_left_hip_fe_p_term"/>
            <field-selection name="left_hip_fe_i_term" source="l_left_hip_fe_i_term"/>
            <field-selection name="left_hip_fe_d_term" source="l_left_hip_fe_d_term"/>
            <field-selection name="left_hip_fe_output" source="l_left_hip_fe_output"/>
            <field-selection name="left_knee_p_error" source="l_left_knee_p_error"/>
            <field-selection name="left_knee_i_error" source="l_left_knee_i_error"/>
            <field-selection name="left_knee_d_error" source="l_left_knee_d_error"/>
            <field-selection name="left_knee_p_term" source="l_left_knee_p_term"/>
            <field-selection name="left_knee_i_term" source="l_left_knee_i_term"/>
            <field-selection name="left_knee_d_term" source="l_left_knee_d_term"/>
            <field-selection name="left_knee_output" source="l_left_knee_output"/>
            <field-selection name="right_ankle_p_error" source="l_right_ankle_p_error"/>
            <field-selection name="right_ankle_i_error" source="l_right_ankle_i_error"/>
            <field-selection name="right_ankle_d_error" source="l_right_ankle_d_error"/>
            <field-selection name="right_ankle_p_term" source="l_right_ankle_p_term"/>
            <field-selection name="right_ankle_i_term" source="l_right_ankle_i_term"/>
            <field-selection name="right_ankle_d_term" source="l_right_ankle_d_term"/>
            <field-selection name="right_ankle_output" source="l_right_ankle_output"/>
            <field-selection name="right_hip_aa_p_error" source="l_right_hip_aa_p_error"/>
            <field-selection name="right_hip_aa_i_error" source="l_right_hip_aa_i_error"/>
            <field-selection name="right_hip_aa_d_error" source="l_right_hip_aa_d_error"/>
            <field-selection name="right_hip_aa_p_term" source="l_right_hip_aa_p_term"/>
            <field-selection name="right_hip_aa_i_term" source="l_right_hip_aa_i_term"/>
            <field-selection name="right_hip_aa_d_term" source="l_right_hip_aa_d_term"/>
            <field-selection name="right_hip_aa_output" source="l_right_hip_aa_output"/>
            <field-selection name="right_hip_fe_p_error" source="l_right_hip_fe_p_error"/>
            <field-selection name="right_hip_fe_i_error" source="l_right_hip_fe_i_error"/>
            <field-selection name="right_hip_fe_d_error" source="l_right_hip_fe_d_error"/>
            <field-selection name="right_hip_fe_p_term" source="l_right_hip_fe_p_term"/>
            <field-selection name="right_hip_fe_i_term" source="l_right_hip_fe_i_term"/>
            <field-selection name="right_hip_fe_d_term" source="l_right_hip_fe_d_term"/>
            <field-selection name="right_hip_fe_output" source="l_right_hip_fe_output"/>
            <field-selection name="right_knee_p_error" source="r_p_error"/>
            <field-selection name="right_knee_i_error" source="r_i_error"/>
            <field-selection name="right_knee_d_error" source="r_d_error"/>
            <field-selection name="right_knee_p_term" source="r_p_term"/>
            <field-selection name="right_knee_i_term" source="r_i_term"/>
            <field-selection name="right_knee_d_term" source="r_d_term"/>
            <field-selection name="right_knee_output" source="r_output"/>
            <field-selection name="dummy_key" source="r_dummy_key"/>
          </output>
        </window-join>
        <window-compute pubsub="true" name="compute_actual_effort">
          <description><![CDATA[This computes the actual effort from the]]></description>
          <schema>
            <fields>
              <field name="join_time" type="stamp" key="true"/>
              <field name="dummy_key" type="int64"/>
              <field name="actual_effort_left_ankle" type="double"/>
              <field name="actual_effort_left_hip_aa" type="double"/>
              <field name="actual_effort_left_hip_fe" type="double"/>
              <field name="actual_effort_left_knee" type="double"/>
              <field name="actual_effort_right_ankle" type="double"/>
              <field name="actual_effort_right_hip_aa" type="double"/>
              <field name="actual_effort_right_hip_fe" type="double"/>
              <field name="actual_effort_right_knee" type="double"/>
            </fields>
          </schema>
          <output>
            <field-expr><![CDATA[dummy_key]]></field-expr>
            <field-expr><![CDATA[motor_current_left_ankle *0.819]]></field-expr>
            <field-expr><![CDATA[motor_current_left_hip_aa*0.819]]></field-expr>
            <field-expr><![CDATA[motor_current_left_hip_fe*0.819]]></field-expr>
            <field-expr><![CDATA[motor_current_left_knee*0.819]]></field-expr>
            <field-expr><![CDATA[motor_current_right_ankle*0.819]]></field-expr>
            <field-expr><![CDATA[motor_current_right_hip_aa*0.819]]></field-expr>
            <field-expr><![CDATA[motor_current_right_hip_fe*0.819]]></field-expr>
            <field-expr><![CDATA[motor_current_right_knee*0.819]]></field-expr>
          </output>
        </window-compute>
        <window-compute pubsub="true" name="normalize_effort">
          <description><![CDATA[This divides the effort commands by 1000 to normalize.]]></description>
          <schema>
            <fields>
              <field name="join_time" type="stamp" key="true"/>
              <field name="dummy_key" type="int32"/>
              <field name="effort_command_left_ankle" type="double"/>
              <field name="effort_command_left_hip_aa" type="double"/>
              <field name="effort_command_left_hip_fe" type="double"/>
              <field name="effort_command_left_knee" type="double"/>
              <field name="effort_command_right_ankle" type="double"/>
              <field name="effort_command_right_hip_aa" type="double"/>
              <field name="effort_command_right_hip_fe" type="double"/>
              <field name="effort_command_right_knee" type="double"/>
            </fields>
          </schema>
          <output>
            <field-expr><![CDATA[dummy_key]]></field-expr>
            <field-expr><![CDATA[effort_command_left_ankle/1000]]></field-expr>
            <field-expr><![CDATA[effort_command_left_hip_aa/1000]]></field-expr>
            <field-expr><![CDATA[effort_command_left_hip_fe/1000]]></field-expr>
            <field-expr><![CDATA[effort_command_left_knee/1000]]></field-expr>
            <field-expr><![CDATA[effort_command_right_ankle/1000]]></field-expr>
            <field-expr><![CDATA[effort_command_right_hip_aa/1000]]></field-expr>
            <field-expr><![CDATA[effort_command_right_hip_fe/1000]]></field-expr>
            <field-expr><![CDATA[effort_command_right_knee/1000]]></field-expr>
          </output>
        </window-compute>
        <window-compute pubsub="true" name="compute_squared_error">
          <description><![CDATA[Computes the square of the error.]]></description>
          <schema>
            <fields>
              <field name="join_time" type="stamp" key="true"/>
              <field name="left_ankle_error" type="double"/>
              <field name="left_hip_aa_error" type="double"/>
              <field name="left_hip_fe_error" type="double"/>
              <field name="left_knee_error" type="double"/>
              <field name="right_ankle_error" type="double"/>
              <field name="right_hip_aa_error" type="double"/>
              <field name="right_hip_fe_error" type="double"/>
              <field name="right_knee_error" type="double"/>
              <field name="left_ankle_square_error" type="double"/>
              <field name="left_hip_aa_square_error" type="double"/>
              <field name="left_hip_fe_square_error" type="double"/>
              <field name="left_knee_square_error" type="double"/>
              <field name="right_ankle_square_error" type="double"/>
              <field name="right_hip_aa_square_error" type="double"/>
              <field name="right_hip_fe_square_error" type="double"/>
              <field name="right_knee_square_error" type="double"/>
            </fields>
          </schema>
          <output>
            <field-expr><![CDATA[left_ankle_p_error]]></field-expr>
            <field-expr><![CDATA[left_hip_aa_p_error]]></field-expr>
            <field-expr><![CDATA[left_hip_fe_p_error]]></field-expr>
            <field-expr><![CDATA[left_knee_p_error]]></field-expr>
            <field-expr><![CDATA[right_ankle_p_error]]></field-expr>
            <field-expr><![CDATA[right_hip_aa_p_error]]></field-expr>
            <field-expr><![CDATA[right_hip_fe_p_error]]></field-expr>
            <field-expr><![CDATA[right_knee_p_error]]></field-expr>
            <field-expr><![CDATA[POW(left_ankle_p_error, 2)]]></field-expr>
            <field-expr><![CDATA[POW(left_hip_aa_p_error, 2)]]></field-expr>
            <field-expr><![CDATA[POW(left_hip_fe_p_error, 2)]]></field-expr>
            <field-expr><![CDATA[POW(left_knee_p_error, 2)]]></field-expr>
            <field-expr><![CDATA[POW(right_ankle_p_error, 2)]]></field-expr>
            <field-expr><![CDATA[POW(right_hip_aa_p_error, 2)]]></field-expr>
            <field-expr><![CDATA[POW(right_hip_fe_p_error, 2)]]></field-expr>
            <field-expr><![CDATA[POW(right_knee_p_error, 2)]]></field-expr>
          </output>
        </window-compute>
        <window-aggregate pubsub="true" name="add_lag_one">
          <description><![CDATA[Adds the error at lag one together with the current error.]]></description>
          <schema>
            <fields>
              <field name="dummy_key" type="int32" key="true"/>
              <field name="join_time" type="stamp"/>
              <field name="left_ankle_error" type="double"/>
              <field name="left_hip_aa_error" type="double"/>
              <field name="left_hip_fe_error" type="double"/>
              <field name="left_knee_error" type="double"/>
              <field name="right_ankle_error" type="double"/>
              <field name="right_hip_aa_error" type="double"/>
              <field name="right_hip_fe_error" type="double"/>
              <field name="right_knee_error" type="double"/>
              <field name="left_ankle_prev_error" type="double"/>
              <field name="left_hip_aa_prev_error" type="double"/>
              <field name="left_hip_fe_prev_error" type="double"/>
              <field name="left_knee_prev_error" type="double"/>
              <field name="right_ankle_prev_error" type="double"/>
              <field name="right_hip_aa_prev_error" type="double"/>
              <field name="right_hip_fe_prev_error" type="double"/>
              <field name="right_knee_prev_error" type="double"/>
            </fields>
          </schema>
          <output>
            <field-expr><![CDATA[ESP_aLast(join_time)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(left_ankle_p_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(left_hip_aa_p_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(left_hip_fe_p_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(left_knee_p_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(right_ankle_p_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(right_hip_aa_p_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(right_hip_fe_p_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(right_knee_p_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aLag(left_ankle_p_error, 1)]]></field-expr>
            <field-expr><![CDATA[ESP_aLag(left_hip_aa_p_error, 1)]]></field-expr>
            <field-expr><![CDATA[ESP_aLag(left_hip_fe_p_error, 1)]]></field-expr>
            <field-expr><![CDATA[ESP_aLag(left_knee_p_error, 1)]]></field-expr>
            <field-expr><![CDATA[ESP_aLag(right_ankle_p_error, 1)]]></field-expr>
            <field-expr><![CDATA[ESP_aLag(right_hip_aa_p_error, 1)]]></field-expr>
            <field-expr><![CDATA[ESP_aLag(right_hip_fe_p_error, 1)]]></field-expr>
            <field-expr><![CDATA[ESP_aLag(right_knee_p_error, 1)]]></field-expr>
          </output>
        </window-aggregate>
        <window-join pubsub="true" name="join_effort_commands">
          <description><![CDATA[Joins the controller output with the after limit command.]]></description>
          <join type="inner">
            <conditions>
              <fields left="join_time" right="join_time"/>
            </conditions>
          </join>
          <output>
            <field-selection name="dummy_key" source="r_dummy_key"/>
            <field-selection name="left_ankle_output" source="l_left_ankle_output"/>
            <field-selection name="left_hip_aa_output" source="l_left_hip_aa_output"/>
            <field-selection name="left_hip_fe_output" source="l_left_hip_fe_output"/>
            <field-selection name="left_knee_output" source="l_left_knee_output"/>
            <field-selection name="right_ankle_output" source="l_right_ankle_output"/>
            <field-selection name="right_hip_aa_output" source="l_right_hip_aa_output"/>
            <field-selection name="right_hip_fe_output" source="l_right_hip_fe_output"/>
            <field-selection name="right_knee_output" source="l_right_knee_output"/>
            <field-selection name="effort_command_left_ankle" source="r_effort_command_left_ankle"/>
            <field-selection name="effort_command_left_hip_aa" source="r_effort_command_left_hip_aa"/>
            <field-selection name="effort_command_left_hip_fe" source="r_effort_command_left_hip_fe"/>
            <field-selection name="effort_command_left_knee" source="r_effort_command_left_knee"/>
            <field-selection name="effort_command_right_ankle" source="r_effort_command_right_ankle"/>
            <field-selection name="effort_command_right_hip_aa" source="r_effort_command_right_hip_aa"/>
            <field-selection name="effort_command_right_hip_fe" source="r_effort_command_right_hip_fe"/>
            <field-selection name="effort_command_right_knee" source="r_effort_command_right_knee"/>
          </output>
        </window-join>
        <window-join pubsub="true" name="join_controller_statistics">
          <description><![CDATA[Joins the error statistics to the squared effort command change to get all the controller statistics.]]></description>
          <join type="inner">
            <conditions>
              <fields left="join_time" right="join_time"/>
            </conditions>
          </join>
          <output>
            <field-selection name="left_ankle_error" source="l_left_ankle_error"/>
            <field-selection name="left_hip_aa_error" source="l_left_hip_aa_error"/>
            <field-selection name="left_hip_fe_error" source="l_left_hip_fe_error"/>
            <field-selection name="left_knee_error" source="l_left_knee_error"/>
            <field-selection name="right_ankle_error" source="l_right_ankle_error"/>
            <field-selection name="right_hip_aa_error" source="l_right_hip_aa_error"/>
            <field-selection name="right_hip_fe_error" source="l_right_hip_fe_error"/>
            <field-selection name="right_knee_error" source="l_right_knee_error"/>
            <field-selection name="left_ankle_square_error" source="l_left_ankle_square_error"/>
            <field-selection name="left_hip_aa_square_error" source="l_left_hip_aa_square_error"/>
            <field-selection name="left_hip_fe_square_error" source="l_left_hip_fe_square_error"/>
            <field-selection name="left_knee_square_error" source="l_left_knee_square_error"/>
            <field-selection name="right_ankle_square_error" source="l_right_ankle_square_error"/>
            <field-selection name="right_hip_aa_square_error" source="l_right_hip_aa_square_error"/>
            <field-selection name="right_hip_fe_square_error" source="l_right_hip_fe_square_error"/>
            <field-selection name="right_knee_square_error" source="l_right_knee_square_error"/>
            <field-selection name="left_ankle_sign_change" source="l_left_ankle_sign_change"/>
            <field-selection name="left_hip_aa_sign_change" source="l_left_hip_aa_sign_change"/>
            <field-selection name="left_hip_fe_sign_change" source="l_left_hip_fe_sign_change"/>
            <field-selection name="left_knee_sign_change" source="l_left_knee_sign_change"/>
            <field-selection name="right_ankle_sign_change" source="l_right_ankle_sign_change"/>
            <field-selection name="right_hip_aa_sign_change" source="l_right_hip_aa_sign_change"/>
            <field-selection name="right_hip_fe_sign_change" source="l_right_hip_fe_sign_change"/>
            <field-selection name="right_knee_sign_change" source="l_right_knee_sign_change"/>
            <field-selection name="left_ankle_limited" source="r_left_ankle_limited"/>
            <field-selection name="left_hip_aa_limited" source="r_left_hip_aa_limited"/>
            <field-selection name="left_hip_fe_limited" source="r_left_hip_fe_limited"/>
            <field-selection name="left_knee_limited" source="r_left_knee_limited"/>
            <field-selection name="right_ankle_limited" source="r_right_ankle_limited"/>
            <field-selection name="right_hip_aa_limited" source="r_right_hip_aa_limited"/>
            <field-selection name="right_hip_fe_limited" source="r_right_hip_fe_limited"/>
            <field-selection name="right_knee_limited" source="r_right_knee_limited"/>
            <field-selection name="left_ankle_increased" source="r_left_ankle_increased"/>
            <field-selection name="left_hip_aa_increased" source="r_left_hip_aa_increased"/>
            <field-selection name="left_hip_fe_increased" source="r_left_hip_fe_increased"/>
            <field-selection name="left_knee_increased" source="r_left_knee_increased"/>
            <field-selection name="right_ankle_increased" source="r_right_ankle_increased"/>
            <field-selection name="right_hip_aa_increased" source="r_right_hip_aa_increased"/>
            <field-selection name="right_hip_fe_increased" source="r_right_hip_fe_increased"/>
            <field-selection name="right_knee_increased" source="r_right_knee_increased"/>
            <field-selection name="left_ankle_sign_changed" source="r_left_ankle_sign_changed"/>
            <field-selection name="left_hip_aa_sign_changed" source="r_left_hip_aa_sign_changed"/>
            <field-selection name="left_hip_fe_sign_changed" source="r_left_hip_fe_sign_changed"/>
            <field-selection name="left_knee_sign_changed" source="r_left_knee_sign_changed"/>
            <field-selection name="right_ankle_sign_changed" source="r_right_ankle_sign_changed"/>
            <field-selection name="right_hip_aa_sign_changed" source="r_right_hip_aa_sign_changed"/>
            <field-selection name="right_hip_fe_sign_changed" source="r_right_hip_fe_sign_changed"/>
            <field-selection name="right_knee_sign_changed" source="r_right_knee_sign_changed"/>
            <field-selection name="join_time" source="l_join_time"/>
            <field-selection name="dummy_key" source="r_dummy_key"/>
            <field-selection name="actual_effort_left_ankle" source="r_actual_effort_left_ankle"/>
            <field-selection name="actual_effort_left_hip_aa" source="r_actual_effort_left_hip_aa"/>
            <field-selection name="actual_effort_left_hip_fe" source="r_actual_effort_left_hip_fe"/>
            <field-selection name="actual_effort_left_knee" source="r_actual_effort_left_knee"/>
            <field-selection name="actual_effort_right_ankle" source="r_actual_effort_right_ankle"/>
            <field-selection name="actual_effort_right_hip_aa" source="r_actual_effort_right_hip_aa"/>
            <field-selection name="actual_effort_right_hip_fe" source="r_actual_effort_right_hip_fe"/>
            <field-selection name="actual_effort_right_knee" source="r_actual_effort_right_knee"/>
          </output>
        </window-join>
        <window-compute pubsub="true" name="compute_sign_change">
          <description><![CDATA[Computes whether the sign of the error has changed.]]></description>
          <expr-initialize>
            <udfs>
              <udf name="sign_change" type="int32"><![CDATA[if parameter(1) > 0 begin if parameter(2) < 0 return 1.0 else return 0.0 end else begin if parameter(2) > 0.0 return 1 else return 0.0 end]]></udf>
            </udfs>
          </expr-initialize>
          <schema>
            <fields>
              <field name="join_time" type="stamp"/>
              <field name="left_ankle_sign_change" type="double"/>
              <field name="left_hip_aa_sign_change" type="double"/>
              <field name="left_hip_fe_sign_change" type="double"/>
              <field name="left_knee_sign_change" type="double"/>
              <field name="right_ankle_sign_change" type="double"/>
              <field name="right_hip_aa_sign_change" type="double"/>
              <field name="right_hip_fe_sign_change" type="double"/>
              <field name="right_knee_sign_change" type="double"/>
              <field name="dummy_key" type="int32"/>
              <field name="eventNumber" type="int64" key="true"/>
            </fields>
          </schema>
          <output>
            <field-expr><![CDATA[join_time]]></field-expr>
            <field-expr><![CDATA[sign_change(left_ankle_error, left_ankle_prev_error)]]></field-expr>
            <field-expr><![CDATA[sign_change(left_hip_aa_error, left_hip_aa_prev_error)]]></field-expr>
            <field-expr><![CDATA[sign_change(left_hip_fe_error, left_hip_fe_prev_error)]]></field-expr>
            <field-expr><![CDATA[sign_change(left_knee_error, left_knee_prev_error)]]></field-expr>
            <field-expr><![CDATA[sign_change(right_ankle_error, right_ankle_prev_error)]]></field-expr>
            <field-expr><![CDATA[sign_change(right_hip_aa_error, right_hip_aa_prev_error)]]></field-expr>
            <field-expr><![CDATA[sign_change(right_hip_fe_error, right_hip_fe_prev_error)]]></field-expr>
            <field-expr><![CDATA[sign_change(right_knee_error, right_knee_prev_error)]]></field-expr>
            <field-expr><![CDATA[dummy_key]]></field-expr>
          </output>
        </window-compute>
        <window-join pubsub="true" name="join_error_statisctics">
          <description><![CDATA[Joins the squared error and the sign change]]></description>
          <join type="inner">
            <conditions>
              <fields left="join_time" right="join_time"/>
            </conditions>
          </join>
          <output>
            <field-selection name="left_ankle_error" source="l_left_ankle_error"/>
            <field-selection name="left_hip_aa_error" source="l_left_hip_aa_error"/>
            <field-selection name="left_hip_fe_error" source="l_left_hip_fe_error"/>
            <field-selection name="left_knee_error" source="l_left_knee_error"/>
            <field-selection name="right_ankle_error" source="l_right_ankle_error"/>
            <field-selection name="right_hip_aa_error" source="l_right_hip_aa_error"/>
            <field-selection name="right_hip_fe_error" source="l_right_hip_fe_error"/>
            <field-selection name="right_knee_error" source="l_right_knee_error"/>
            <field-selection name="left_ankle_square_error" source="l_left_ankle_square_error"/>
            <field-selection name="left_hip_aa_square_error" source="l_left_hip_aa_square_error"/>
            <field-selection name="left_hip_fe_square_error" source="l_left_hip_fe_square_error"/>
            <field-selection name="left_knee_square_error" source="l_left_knee_square_error"/>
            <field-selection name="right_ankle_square_error" source="l_right_ankle_square_error"/>
            <field-selection name="right_hip_aa_square_error" source="l_right_hip_aa_square_error"/>
            <field-selection name="right_hip_fe_square_error" source="l_right_hip_fe_square_error"/>
            <field-selection name="right_knee_square_error" source="l_right_knee_square_error"/>
            <field-selection name="left_ankle_sign_change" source="r_left_ankle_sign_change"/>
            <field-selection name="left_hip_aa_sign_change" source="r_left_hip_aa_sign_change"/>
            <field-selection name="left_hip_fe_sign_change" source="r_left_hip_fe_sign_change"/>
            <field-selection name="left_knee_sign_change" source="r_left_knee_sign_change"/>
            <field-selection name="right_ankle_sign_change" source="r_right_ankle_sign_change"/>
            <field-selection name="right_hip_aa_sign_change" source="r_right_hip_aa_sign_change"/>
            <field-selection name="right_hip_fe_sign_change" source="r_right_hip_fe_sign_change"/>
            <field-selection name="right_knee_sign_change" source="r_right_knee_sign_change"/>
            <field-selection name="join_time" source="r_join_time"/>
          </output>
        </window-join>
        <window-aggregate pubsub="true" name="aggregate_gait_control">
          <description><![CDATA[Holds the last gait]]></description>
          <schema>
            <fields>
              <field name="dummy_key" type="int64" key="true"/>
              <field name="SEQUENCE" type="int64"/>
              <field name="time" type="stamp"/>
              <field name="gait_name" type="string"/>
              <field name="subgait_name" type="string"/>
              <field name="version" type="string"/>
              <field name="gait_type" type="string"/>
            </fields>
          </schema>
          <output>
            <field-expr><![CDATA[ESP_aLast(SEQUENCE)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(time)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(gait_name)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(subgait_name)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(version)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(gait_type)]]></field-expr>
          </output>
        </window-aggregate>
        <window-join pubsub="true" name="join_gait_controller">
          <description><![CDATA[Joins the last gait event to the controller statistics]]></description>
          <join type="inner">
            <conditions>
              <fields left="dummy_key" right="dummy_key"/>
            </conditions>
          </join>
          <output>
            <field-selection name="SEQUENCE" source="l_SEQUENCE"/>
            <field-selection name="time" source="l_time"/>
            <field-selection name="gait_name" source="l_gait_name"/>
            <field-selection name="subgait_name" source="l_subgait_name"/>
            <field-selection name="version" source="l_version"/>
            <field-selection name="gait_type" source="l_gait_type"/>
            <field-selection name="left_ankle_error" source="r_left_ankle_error"/>
            <field-selection name="left_hip_aa_error" source="r_left_hip_aa_error"/>
            <field-selection name="left_hip_fe_error" source="r_left_hip_fe_error"/>
            <field-selection name="left_knee_error" source="r_left_knee_error"/>
            <field-selection name="right_ankle_error" source="r_right_ankle_error"/>
            <field-selection name="right_hip_aa_error" source="r_right_hip_aa_error"/>
            <field-selection name="right_hip_fe_error" source="r_right_hip_fe_error"/>
            <field-selection name="right_knee_error" source="r_right_knee_error"/>
            <field-selection name="left_ankle_square_error" source="r_left_ankle_square_error"/>
            <field-selection name="left_hip_aa_square_error" source="r_left_hip_aa_square_error"/>
            <field-selection name="left_hip_fe_square_error" source="r_left_hip_fe_square_error"/>
            <field-selection name="left_knee_square_error" source="r_left_knee_square_error"/>
            <field-selection name="right_ankle_square_error" source="r_right_ankle_square_error"/>
            <field-selection name="right_hip_aa_square_error" source="r_right_hip_aa_square_error"/>
            <field-selection name="right_hip_fe_square_error" source="r_right_hip_fe_square_error"/>
            <field-selection name="right_knee_square_error" source="r_right_knee_square_error"/>
            <field-selection name="left_ankle_sign_change" source="r_left_ankle_sign_change"/>
            <field-selection name="left_hip_aa_sign_change" source="r_left_hip_aa_sign_change"/>
            <field-selection name="left_hip_fe_sign_change" source="r_left_hip_fe_sign_change"/>
            <field-selection name="left_knee_sign_change" source="r_left_knee_sign_change"/>
            <field-selection name="right_ankle_sign_change" source="r_right_ankle_sign_change"/>
            <field-selection name="right_hip_aa_sign_change" source="r_right_hip_aa_sign_change"/>
            <field-selection name="right_hip_fe_sign_change" source="r_right_hip_fe_sign_change"/>
            <field-selection name="right_knee_sign_change" source="r_right_knee_sign_change"/>
            <field-selection name="left_ankle_limited" source="r_left_ankle_limited"/>
            <field-selection name="left_hip_aa_limited" source="r_left_hip_aa_limited"/>
            <field-selection name="left_hip_fe_limited" source="r_left_hip_fe_limited"/>
            <field-selection name="left_knee_limited" source="r_left_knee_limited"/>
            <field-selection name="right_ankle_limited" source="r_right_ankle_limited"/>
            <field-selection name="right_hip_aa_limited" source="r_right_hip_aa_limited"/>
            <field-selection name="right_hip_fe_limited" source="r_right_hip_fe_limited"/>
            <field-selection name="right_knee_limited" source="r_right_knee_limited"/>
            <field-selection name="left_ankle_increased" source="r_left_ankle_increased"/>
            <field-selection name="left_hip_aa_increased" source="r_left_hip_aa_increased"/>
            <field-selection name="left_hip_fe_increased" source="r_left_hip_fe_increased"/>
            <field-selection name="left_knee_increased" source="r_left_knee_increased"/>
            <field-selection name="right_ankle_increased" source="r_right_ankle_increased"/>
            <field-selection name="right_hip_aa_increased" source="r_right_hip_aa_increased"/>
            <field-selection name="right_hip_fe_increased" source="r_right_hip_fe_increased"/>
            <field-selection name="right_knee_increased" source="r_right_knee_increased"/>
            <field-selection name="left_ankle_sign_changed" source="r_left_ankle_sign_changed"/>
            <field-selection name="left_hip_aa_sign_changed" source="r_left_hip_aa_sign_changed"/>
            <field-selection name="left_hip_fe_sign_changed" source="r_left_hip_fe_sign_changed"/>
            <field-selection name="left_knee_sign_changed" source="r_left_knee_sign_changed"/>
            <field-selection name="right_ankle_sign_changed" source="r_right_ankle_sign_changed"/>
            <field-selection name="right_hip_aa_sign_changed" source="r_right_hip_aa_sign_changed"/>
            <field-selection name="right_hip_fe_sign_changed" source="r_right_hip_fe_sign_changed"/>
            <field-selection name="right_knee_sign_changed" source="r_right_knee_sign_changed"/>
            <field-selection name="actual_effort_left_ankle" source="r_actual_effort_left_ankle"/>
            <field-selection name="actual_effort_left_hip_aa" source="r_actual_effort_left_hip_aa"/>
            <field-selection name="actual_effort_left_hip_fe" source="r_actual_effort_left_hip_fe"/>
            <field-selection name="actual_effort_left_knee" source="r_actual_effort_left_knee"/>
            <field-selection name="actual_effort_right_ankle" source="r_actual_effort_right_ankle"/>
            <field-selection name="actual_effort_right_hip_aa" source="r_actual_effort_right_hip_aa"/>
            <field-selection name="actual_effort_right_hip_fe" source="r_actual_effort_right_hip_fe"/>
            <field-selection name="actual_effort_right_knee" source="r_actual_effort_right_knee"/>
            <field-selection name="join_time" source="r_join_time"/>
          </output>
        </window-join>
        <window-compute pubsub="true" name="compute_safety_limits_worked">
          <description><![CDATA[Checks whether the safety limits worked on the command]]></description>
          <expr-initialize>
            <udfs>
              <udf name="sign_changed" type="int32"><![CDATA[if parameter(1) > 0
begin
if parameter(2) < 0 
return 1
else
return 0
end
else
begin
if parameter(2) > 0 
return 1
else
return 0
end]]></udf>
              <udf name="limited" type="string"><![CDATA[if ABS(parameter(1) - parameter(2)) > 0.1
return 1
else
return 0]]></udf>
              <udf name="increased" type="int32"><![CDATA[if ABS(parameter(1)) > ABS(parameter(2))
return 1
else 
return 0]]></udf>
            </udfs>
          </expr-initialize>
          <schema>
            <fields>
              <field name="join_time" type="stamp" key="true"/>
              <field name="dummy_key" type="int32"/>
              <field name="left_ankle_limited" type="int32"/>
              <field name="left_hip_aa_limited" type="int32"/>
              <field name="left_hip_fe_limited" type="int32"/>
              <field name="left_knee_limited" type="int32"/>
              <field name="right_ankle_limited" type="int32"/>
              <field name="right_hip_aa_limited" type="int32"/>
              <field name="right_hip_fe_limited" type="int32"/>
              <field name="right_knee_limited" type="int32"/>
              <field name="left_ankle_increased" type="int32"/>
              <field name="left_hip_aa_increased" type="int32"/>
              <field name="left_hip_fe_increased" type="int32"/>
              <field name="left_knee_increased" type="int32"/>
              <field name="right_ankle_increased" type="int32"/>
              <field name="right_hip_aa_increased" type="int32"/>
              <field name="right_hip_fe_increased" type="int32"/>
              <field name="right_knee_increased" type="int32"/>
              <field name="left_ankle_sign_changed" type="int32"/>
              <field name="left_hip_aa_sign_changed" type="int32"/>
              <field name="left_hip_fe_sign_changed" type="int32"/>
              <field name="left_knee_sign_changed" type="int32"/>
              <field name="right_ankle_sign_changed" type="int32"/>
              <field name="right_hip_aa_sign_changed" type="int32"/>
              <field name="right_hip_fe_sign_changed" type="int32"/>
              <field name="right_knee_sign_changed" type="int32"/>
            </fields>
          </schema>
          <output>
            <field-expr><![CDATA[dummy_key]]></field-expr>
            <field-expr><![CDATA[limited(left_ankle_output, effort_command_left_ankle)]]></field-expr>
            <field-expr><![CDATA[limited(left_hip_aa_output, effort_command_left_hip_aa)]]></field-expr>
            <field-expr><![CDATA[limited(left_hip_fe_output, effort_command_left_hip_fe)]]></field-expr>
            <field-expr><![CDATA[limited(left_knee_output, effort_command_left_knee)]]></field-expr>
            <field-expr><![CDATA[limited(right_ankle_output, effort_command_right_ankle)]]></field-expr>
            <field-expr><![CDATA[limited(right_hip_aa_output, effort_command_right_hip_aa)]]></field-expr>
            <field-expr><![CDATA[limited(right_hip_fe_output, effort_command_right_hip_fe)]]></field-expr>
            <field-expr><![CDATA[limited(right_knee_output, effort_command_right_knee)]]></field-expr>
            <field-expr><![CDATA[increased(left_ankle_output, effort_command_left_ankle)]]></field-expr>
            <field-expr><![CDATA[increased(left_hip_aa_output, effort_command_left_hip_aa)]]></field-expr>
            <field-expr><![CDATA[increased(left_hip_fe_output, effort_command_left_hip_fe)]]></field-expr>
            <field-expr><![CDATA[increased(left_knee_output, effort_command_left_knee)]]></field-expr>
            <field-expr><![CDATA[increased(right_ankle_output, effort_command_right_ankle)]]></field-expr>
            <field-expr><![CDATA[increased(right_hip_aa_output, effort_command_right_hip_aa)]]></field-expr>
            <field-expr><![CDATA[increased(right_hip_fe_output, effort_command_right_hip_fe)]]></field-expr>
            <field-expr><![CDATA[increased(right_knee_output, effort_command_right_knee)]]></field-expr>
            <field-expr><![CDATA[sign_changed(left_ankle_output, effort_command_left_ankle)]]></field-expr>
            <field-expr><![CDATA[sign_changed(left_hip_aa_output, effort_command_left_hip_aa)]]></field-expr>
            <field-expr><![CDATA[sign_changed(left_hip_fe_output, effort_command_left_hip_fe)]]></field-expr>
            <field-expr><![CDATA[sign_changed(left_knee_output, effort_command_left_knee)]]></field-expr>
            <field-expr><![CDATA[sign_changed(right_ankle_output, effort_command_right_ankle)]]></field-expr>
            <field-expr><![CDATA[sign_changed(right_hip_aa_output, effort_command_right_hip_aa)]]></field-expr>
            <field-expr><![CDATA[sign_changed(right_hip_fe_output, effort_command_right_hip_fe)]]></field-expr>
            <field-expr><![CDATA[sign_changed(right_knee_output, effort_command_right_knee)]]></field-expr>
          </output>
        </window-compute>
        <window-join pubsub="true" name="join_effort_statistics">
          <description><![CDATA[Join effort correlation, squared effort and whether the effort is limited]]></description>
          <join type="inner">
            <conditions>
              <fields left="join_time" right="join_time"/>
            </conditions>
          </join>
          <output>
            <field-selection name="dummy_key" source="l_dummy_key"/>
            <field-selection name="left_ankle_limited" source="l_left_ankle_limited"/>
            <field-selection name="left_hip_aa_limited" source="l_left_hip_aa_limited"/>
            <field-selection name="left_hip_fe_limited" source="l_left_hip_fe_limited"/>
            <field-selection name="left_knee_limited" source="l_left_knee_limited"/>
            <field-selection name="right_ankle_limited" source="l_right_ankle_limited"/>
            <field-selection name="right_hip_aa_limited" source="l_right_hip_aa_limited"/>
            <field-selection name="right_hip_fe_limited" source="l_right_hip_fe_limited"/>
            <field-selection name="right_knee_limited" source="l_right_knee_limited"/>
            <field-selection name="left_ankle_increased" source="l_left_ankle_increased"/>
            <field-selection name="left_hip_aa_increased" source="l_left_hip_aa_increased"/>
            <field-selection name="left_hip_fe_increased" source="l_left_hip_fe_increased"/>
            <field-selection name="left_knee_increased" source="l_left_knee_increased"/>
            <field-selection name="right_ankle_increased" source="l_right_ankle_increased"/>
            <field-selection name="right_hip_aa_increased" source="l_right_hip_aa_increased"/>
            <field-selection name="right_hip_fe_increased" source="l_right_hip_fe_increased"/>
            <field-selection name="right_knee_increased" source="l_right_knee_increased"/>
            <field-selection name="left_ankle_sign_changed" source="l_left_ankle_sign_changed"/>
            <field-selection name="left_hip_aa_sign_changed" source="l_left_hip_aa_sign_changed"/>
            <field-selection name="left_hip_fe_sign_changed" source="l_left_hip_fe_sign_changed"/>
            <field-selection name="left_knee_sign_changed" source="l_left_knee_sign_changed"/>
            <field-selection name="right_ankle_sign_changed" source="l_right_ankle_sign_changed"/>
            <field-selection name="right_hip_aa_sign_changed" source="l_right_hip_aa_sign_changed"/>
            <field-selection name="right_hip_fe_sign_changed" source="l_right_hip_fe_sign_changed"/>
            <field-selection name="right_knee_sign_changed" source="l_right_knee_sign_changed"/>
            <field-selection name="actual_effort_left_ankle" source="r_actual_effort_left_ankle"/>
            <field-selection name="actual_effort_left_hip_aa" source="r_actual_effort_left_hip_aa"/>
            <field-selection name="actual_effort_left_hip_fe" source="r_actual_effort_left_hip_fe"/>
            <field-selection name="actual_effort_left_knee" source="r_actual_effort_left_knee"/>
            <field-selection name="actual_effort_right_ankle" source="r_actual_effort_right_ankle"/>
            <field-selection name="actual_effort_right_hip_aa" source="r_actual_effort_right_hip_aa"/>
            <field-selection name="actual_effort_right_hip_fe" source="r_actual_effort_right_hip_fe"/>
            <field-selection name="actual_effort_right_knee" source="r_actual_effort_right_knee"/>
          </output>
        </window-join>
        <window-aggregate pubsub="true" name="aggregate_per_gait">
          <description><![CDATA[Aggregates the controller statistics per subgait.]]></description>
          <schema>
            <fields>
              <field name="SEQUENCE" type="int64" key="true"/>
              <field name="gait_time" type="stamp"/>
              <field name="gait_name" type="string"/>
              <field name="subgait_name" type="string"/>
              <field name="version" type="string"/>
              <field name="gait_type" type="string"/>
              <field name="min_left_ankle_error" type="double"/>
              <field name="min_left_hip_aa_error" type="double"/>
              <field name="min_left_hip_fe_error" type="double"/>
              <field name="min_left_knee_error" type="double"/>
              <field name="min_right_ankle_error" type="double"/>
              <field name="min_right_hip_aa_error" type="double"/>
              <field name="min_right_hip_fe_error" type="double"/>
              <field name="min_right_knee_error" type="double"/>
              <field name="max_left_ankle_error" type="double"/>
              <field name="max_left_hip_aa_error" type="double"/>
              <field name="max_left_hip_fe_error" type="double"/>
              <field name="max_left_knee_error" type="double"/>
              <field name="max_right_ankle_error" type="double"/>
              <field name="max_right_hip_aa_error" type="double"/>
              <field name="max_right_hip_fe_error" type="double"/>
              <field name="max_right_knee_error" type="double"/>
              <field name="mean_left_ankle_square_error" type="double"/>
              <field name="mean_left_hip_aa_square_error" type="double"/>
              <field name="mean_left_hip_fe_square_error" type="double"/>
              <field name="mean_left_knee_square_error" type="double"/>
              <field name="mean_right_ankle_square_error" type="double"/>
              <field name="mean_right_hip_aa_square_error" type="double"/>
              <field name="mean_right_hip_fe_square_error" type="double"/>
              <field name="mean_right_knee_square_error" type="double"/>
              <field name="mean_left_ankle_sign_change" type="double"/>
              <field name="mean_left_hip_aa_sign_change" type="double"/>
              <field name="mean_left_hip_fe_sign_change" type="double"/>
              <field name="mean_left_knee_sign_change" type="double"/>
              <field name="mean_right_ankle_sign_change" type="double"/>
              <field name="mean_right_hip_aa_sign_change" type="double"/>
              <field name="mean_right_hip_fe_sign_change" type="double"/>
              <field name="mean_right_knee_sign_change" type="double"/>
              <field name="mean_left_ankle_limited" type="int32"/>
              <field name="mean_left_hip_aa_limited" type="int32"/>
              <field name="mean_left_hip_fe_limited" type="int32"/>
              <field name="mean_left_knee_limited" type="int32"/>
              <field name="mean_right_ankle_limited" type="int32"/>
              <field name="mean_right_hip_aa_limited" type="int32"/>
              <field name="mean_right_hip_fe_limited" type="int32"/>
              <field name="mean_right_knee_limited" type="int32"/>
              <field name="mean_left_ankle_increased" type="int32"/>
              <field name="mean_left_hip_aa_increased" type="int32"/>
              <field name="mean_left_hip_fe_increased" type="int32"/>
              <field name="mean_left_knee_increased" type="int32"/>
              <field name="mean_right_ankle_increased" type="int32"/>
              <field name="mean_right_hip_aa_increased" type="int32"/>
              <field name="mean_right_hip_fe_increased" type="int32"/>
              <field name="mean_right_knee_increased" type="int32"/>
              <field name="mean_left_ankle_sign_changed" type="int32"/>
              <field name="mean_left_hip_aa_sign_changed" type="int32"/>
              <field name="mean_left_hip_fe_sign_changed" type="int32"/>
              <field name="mean_left_knee_sign_changed" type="int32"/>
              <field name="mean_right_ankle_sign_changed" type="int32"/>
              <field name="mean_right_hip_aa_sign_changed" type="int32"/>
              <field name="mean_right_hip_fe_sign_changed" type="int32"/>
              <field name="mean_right_knee_sign_changed" type="int32"/>
              <field name="mean_left_hip_aa_actual_effort" type="double"/>
              <field name="mean_left_hip_fe_actual_effort" type="double"/>
              <field name="mean_right_ankle_actual_effort" type="double"/>
              <field name="mean_right_hip_fe_actual_effort" type="double"/>
              <field name="mean_left_ankle_actual_effort" type="double"/>
              <field name="mean_right_hip_aa_actual_effort" type="double"/>
              <field name="mean_left_knee_actual_effort" type="double"/>
              <field name="mean_right_knee_actual_effort" type="double"/>
              <field name="min_join_time" type="stamp"/>
              <field name="max_join_time" type="stamp"/>
            </fields>
          </schema>
          <output>
            <field-expr><![CDATA[ESP_aLast(time)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(gait_name)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(subgait_name)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(version)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(gait_type)]]></field-expr>
            <field-expr><![CDATA[ESP_aMin(left_ankle_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aMin(left_hip_aa_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aMin(left_hip_fe_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aMin(left_knee_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aMin(right_ankle_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aMin(right_hip_aa_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aMin(right_hip_fe_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aMin(right_knee_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aMax(left_ankle_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aMax(left_hip_aa_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aMax(left_hip_fe_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aMax(left_knee_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aMax(right_ankle_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aMax(right_hip_aa_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aMax(right_hip_fe_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aMax(right_knee_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(left_ankle_square_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(left_hip_aa_square_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(left_hip_fe_square_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(left_knee_square_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_ankle_square_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_hip_aa_square_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_hip_fe_square_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_knee_square_error)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(left_ankle_sign_change)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(left_hip_aa_sign_change)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(left_hip_fe_sign_change)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(left_knee_sign_change)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_ankle_sign_change)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_hip_aa_sign_change)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_hip_fe_sign_change)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_knee_sign_change)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(left_ankle_limited)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(left_hip_aa_limited)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(left_hip_fe_limited)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(left_knee_limited)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_ankle_limited)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_hip_aa_limited)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_hip_fe_limited)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_knee_increased)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(left_ankle_increased)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(left_hip_aa_increased)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(left_hip_fe_increased)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(left_knee_increased)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_ankle_increased)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_hip_aa_increased)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_hip_fe_increased)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_knee_increased)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(left_ankle_sign_changed)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(left_hip_aa_sign_changed)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(left_hip_fe_sign_changed)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(left_knee_sign_changed)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_ankle_sign_changed)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_hip_aa_sign_changed)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_hip_fe_sign_changed)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_knee_sign_changed)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(actual_effort_left_hip_aa)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(actual_effort_left_hip_fe)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(actual_effort_right_ankle)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(right_hip_fe_sign_changed)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(actual_effort_left_ankle)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(actual_effort_right_hip_aa)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(actual_effort_left_knee)]]></field-expr>
            <field-expr><![CDATA[ESP_aAve(actual_effort_right_knee)]]></field-expr>
            <field-expr><![CDATA[ESP_aFirst(join_time)]]></field-expr>
            <field-expr><![CDATA[ESP_aLast(join_time)]]></field-expr>
          </output>
        </window-aggregate>
        <window-remove-state remove="deletes retentionUpdates retentionDeletes updateBlockDeletes" pubsub="true" name="RemoveState3"/>
        <window-remove-state remove="deletes retentionUpdates retentionDeletes updateBlockDeletes" pubsub="true" name="remove_state_aggregate_per_gait">
          <description><![CDATA[Remove the state for better csv output.]]></description>
          <connectors>
            <connector class="fs" name="aggregate_per_gait_csv">
              <description><![CDATA[Puts the aggregated per gait data in csv file]]></description>
              <properties>
                <property name="type"><![CDATA[sub]]></property>
                <property name="dateformat"><![CDATA[%Y-%m-%d %H:%M:%S]]></property>
                <property name="fsname"><![CDATA[data/unprocessed_aggregate_per_gait_@NOW@.csv]]></property>
                <property name="fstype"><![CDATA[csv]]></property>
                <property name="snapshot"><![CDATA[true]]></property>
                <property name="header"><![CDATA[full]]></property>
              </properties>
            </connector>
          </connectors>
        </window-remove-state>
        <window-copy pubsub="true" name="Copy3">
          <retention type="bytime_sliding" field="join_time"><![CDATA[@Retention@ seconds]]></retention>
        </window-copy>
        <window-remove-state remove="deletes retentionUpdates retentionDeletes updateBlockDeletes" pubsub="true" name="remove_state_4">
          <description><![CDATA[Remove the state for better csv output.]]></description>
          <connectors>
            <connector class="fs" name="aggregate_per_gait_csv">
              <description><![CDATA[Puts the aggregated per gait data in csv file]]></description>
              <properties>
                <property name="type"><![CDATA[sub]]></property>
                <property name="dateformat"><![CDATA[%Y-%m-%d %H:%M:%S]]></property>
                <property name="fsname"><![CDATA[data/pid_values_@NOW@.csv]]></property>
                <property name="fstype"><![CDATA[csv]]></property>
                <property name="snapshot"><![CDATA[true]]></property>
                <property name="header"><![CDATA[full]]></property>
              </properties>
            </connector>
          </connectors>
        </window-remove-state>
      </windows>
      <edges>
        <edge source="source_pid_state_left_ankle" target="join_pid_state_left_hip_aa" role="left"/>
        <edge source="source_pid_state_left_hip_aa" target="join_pid_state_left_hip_aa" role="right"/>
        <edge source="source_pid_state_left_hip_fe" target="join_pid_state_left_hip_fe" role="left"/>
        <edge source="join_pid_state_left_hip_aa" target="join_pid_state_left_hip_fe" role="right"/>
        <edge source="join_pid_state_left_hip_fe" target="join_pid_state_left_knee" role="left"/>
        <edge source="source_pid_state_left_knee" target="join_pid_state_left_knee" role="right"/>
        <edge source="source_pid_state_right_ankle" target="join_pid_state_right_ankle" role="left"/>
        <edge source="join_pid_state_left_knee" target="join_pid_state_right_ankle" role="right"/>
        <edge source="source_pid_state_right_hip_aa" target="join_pid_state_right_hip_aa" role="left"/>
        <edge source="join_pid_state_right_ankle" target="join_pid_state_right_hip_aa" role="right"/>
        <edge source="join_pid_state_right_hip_aa" target="join_pid_state_right_hip_fe" role="left"/>
        <edge source="source_pid_state_right_hip_fe" target="join_pid_state_right_hip_fe" role="right"/>
        <edge source="join_pid_state_right_hip_fe" target="join_pid_state_right_knee" role="left"/>
        <edge source="source_pid_state_right_knee" target="join_pid_state_right_knee" role="right"/>
        <edge source="source_imc" target="compute_actual_effort"/>
        <edge source="source_effort_command" target="normalize_effort"/>
        <edge source="join_error_statisctics" target="join_controller_statistics" role="left"/>
        <edge source="compute_squared_error" target="join_error_statisctics" role="left"/>
        <edge source="compute_sign_change" target="join_error_statisctics" role="right"/>
        <edge source="source_gait_control" target="aggregate_gait_control"/>
        <edge source="aggregate_gait_control" target="join_gait_controller" role="left"/>
        <edge source="join_controller_statistics" target="join_gait_controller" role="right"/>
        <edge source="join_effort_commands" target="compute_safety_limits_worked"/>
        <edge source="join_gait_controller" target="aggregate_per_gait"/>
        <edge source="add_lag_one" target="RemoveState3"/>
        <edge source="join_effort_statistics" target="join_controller_statistics" role="right"/>
        <edge source="aggregate_per_gait" target="remove_state_aggregate_per_gait"/>
        <edge source="RemoveState3" target="Copy3"/>
        <edge source="Copy3" target="compute_sign_change"/>
        <edge source="join_pid_state_right_knee" target="add_lag_one"/>
        <edge source="join_pid_state_right_knee" target="join_effort_commands" role="left"/>
        <edge source="normalize_effort" target="join_effort_commands" role="right"/>
        <edge source="join_pid_state_right_knee" target="compute_squared_error"/>
        <edge source="join_pid_state_right_knee" target="remove_state_4"/>
        <edge source="compute_safety_limits_worked" target="join_effort_statistics" role="left"/>
        <edge source="compute_actual_effort" target="join_effort_statistics" role="right"/>
      </edges>
    </contquery>
  </contqueries>
</project>